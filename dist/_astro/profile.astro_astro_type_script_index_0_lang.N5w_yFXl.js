import{s as i}from"./supabase.DgUM0jQD.js";async function f(){const{data:{user:n}}=await i.auth.getUser();if(!n){window.location.href="/signup";return}const e={username:document.getElementById("display-username"),email:document.getElementById("display-email"),infoUsername:document.getElementById("info-username"),infoDate:document.getElementById("info-date"),avatarInitial:document.getElementById("avatar-initial"),levelBadge:document.getElementById("display-level"),currentXp:document.getElementById("current-xp"),xpBar:document.getElementById("xp-bar"),xpNeeded:document.getElementById("xp-needed")};e.email&&(e.email.textContent=n.email||"");const{data:t,error:r}=await i.from("agorasusers").select("*").eq("id",n.id).single();r&&console.error("Profil hatasÄ±:",r);const a=t?.username||n.email?.split("@")[0]||"Oyuncu";e.username&&(e.username.textContent=a),e.infoUsername&&(e.infoUsername.textContent=a),e.infoDate&&t?.created_at&&(e.infoDate.textContent=new Date(t.created_at).toLocaleDateString("tr-TR")),e.avatarInitial&&(e.avatarInitial.textContent=(a[0]||"?").toUpperCase());const l=t?.xp||0,c=t?.level||1,o=100,s=l%o,m=s/o*100,u=o-s;if(e.levelBadge&&(e.levelBadge.textContent=`Lvl ${c}`),e.currentXp&&(e.currentXp.textContent=l.toString()),e.xpNeeded&&(e.xpNeeded.textContent=u.toString()),e.xpBar){const p=e.xpBar;setTimeout(()=>{p.style.width=`${m}%`},100)}}const d=document.getElementById("logout-btn");d&&d.addEventListener("click",async()=>{await i.auth.signOut(),window.location.href="/signup"});f();
