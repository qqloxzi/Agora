import{s as a}from"./supabase.DgUM0jQD.js";async function m(){const t=document.getElementById("auth-guest"),n=document.getElementById("auth-user"),r=document.getElementById("user-nav-name"),l=document.getElementById("user-nav-level"),i=document.getElementById("user-nav-avatar");if(!t||!n)return;const{data:{session:s}}=await a.auth.getSession();if(s){const u=s.user.user_metadata;let d=u.full_name||u.name||"Kullanıcı",o=u.avatar_url||"/default-avatar.svg";const{data:e}=await a.from("agorasusers").select("username, level, avatar_url").eq("id",s.user.id).maybeSingle();e?.username&&(d=e.username),e?.avatar_url&&(o=e.avatar_url),r&&(r.innerText=d),l&&(l.innerText=`Seviye: ${e?.level||1}`),i&&(i.src=o),t.classList.add("auth-hidden"),n.classList.remove("auth-hidden")}else t.classList.remove("auth-hidden"),n.classList.add("auth-hidden")}const c=document.getElementById("logout-nav-btn");c&&c.addEventListener("click",async()=>{await a.auth.signOut(),window.location.href="/login"});a.auth.onAuthStateChange(()=>m());m();
