import{r as k}from"./index.DiEladB3.js";var L={exports:{}},T={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q;function le(){if(Q)return T;Q=1;var h=Symbol.for("react.transitional.element"),x=Symbol.for("react.fragment");function g(w,p,b){var u=null;if(b!==void 0&&(u=""+b),p.key!==void 0&&(u=""+p.key),"key"in p){b={};for(var j in p)j!=="key"&&(b[j]=p[j])}else b=p;return p=b.ref,{$$typeof:h,type:w,key:u,ref:p!==void 0?p:null,props:b}}return T.Fragment=x,T.jsx=g,T.jsxs=g,T}var X;function ue(){return X||(X=1,L.exports=le()),L.exports}var s=ue();const he=({problem:h,isTeacher:x=!1,onSolve:g=null,description:w=""})=>{const p=k.useRef(null),b=k.useRef(null),u=k.useRef({size:9,stones:[],labels:[],turn:"black",history:[],moveTree:{children:[]},currentNode:null,lastMove:null,isLocked:!1,hoverPos:{x:-1,y:-1},hasSolution:!1,mode:"SOLVE",initialStateStr:"",recordingStartColor:"black"}),[j,P]=k.useState(""),[K,Z]=k.useState("#fff"),[z,C]=k.useState("black"),[B,ee]=k.useState({col:[],row:[]}),[J,$]=k.useState("SETUP"),[D,Y]=k.useState(9),O=k.useRef(typeof Audio<"u"?new Audio("/sounds/stone.mp3"):null);k.useEffect(()=>(q(),window.addEventListener("resize",W),()=>window.removeEventListener("resize",W)),[h]);const q=()=>{const e=u.current;if(e.size=h?.size||9,Y(e.size),F(e.size),e.turn=h?.turn||"black",e.recordingStartColor=e.turn,e.lastMove=h?.lastMove||null,e.mode=x?"SETUP":"SOLVE",$(e.mode),h?.solution)if(Array.isArray(h.solution)&&h.solution.length>0){let t={children:[]};e.moveTree=t,h.solution.forEach(o=>{const r={...o,children:[],status:null};t.children.push(r),t=r}),t.status="correct",e.hasSolution=!0}else h.solution.children?(e.moveTree=h.solution,e.hasSolution=!0):(e.moveTree={children:[]},e.hasSolution=!1);else e.moveTree={children:[]},e.hasSolution=!1;if(e.currentNode=e.moveTree,h?.initialState)try{const t=typeof h.initialState=="string"?JSON.parse(h.initialState):h.initialState;Array.isArray(t)&&t.length>0&&(e.stones=t,e.initialStateStr=typeof h.initialState=="string"?h.initialState:JSON.stringify(t))}catch(t){console.error("Parse Error",t)}C(e.turn),P(x?"√ñƒüretmen Modu: SETUP":e.hasSolution?"":"Analiz Modu"),I(e.size),requestAnimationFrame(v)},F=e=>{const t=u.current;t.size=e,t.stones=Array(e).fill(0).map(()=>Array(e).fill(null)),t.labels=Array(e).fill(0).map(()=>Array(e).fill(null)),t.history=[],t.isLocked=!1,t.hoverPos={x:-1,y:-1}},I=e=>{const t=[],o=[];for(let r=0;r<e;r++)t.push(String.fromCharCode(65+(r>=8?r+1:r)));for(let r=0;r<e;r++)o.push(e-r);ee({col:t,row:o})},te=e=>{if(!x)return;const t=u.current;t.size=e,Y(e),F(e),t.moveTree={children:[]},t.currentNode=t.moveTree,t.initialStateStr="",t.history=[],t.lastMove=null,I(e),P(`${e}x${e} Tahta Hazƒ±r`),requestAnimationFrame(v)},G=e=>{const t=u.current;e==="SETUP"?(t.mode="SETUP",m("Ta≈ülarƒ± dizin.","#fff")):e==="RECORD"&&(t.initialStateStr=JSON.stringify(t.stones),t.recordingStartColor=t.turn,t.moveTree={children:[]},t.currentNode=t.moveTree,t.history=[],t.mode="RECORD",m("Kayƒ±t Ba≈üladƒ±","#f1c40f")),$(e)},re=()=>{const e=u.current;if(!e.currentNode||e.currentNode===e.moveTree){m("Ba≈ülangƒ±√ßtasƒ±nƒ±z, geri alƒ±namaz.","#e74c3c");return}if(e.history.length>0){const t=e.history.pop();e.stones=JSON.parse(t)}else e.initialStateStr&&(e.stones=JSON.parse(e.initialStateStr));e.currentNode.parent?e.currentNode=e.currentNode.parent:e.currentNode=e.moveTree,e.turn=e.turn==="black"?"white":"black",C(e.turn),e.currentNode&&e.currentNode!==e.moveTree?e.lastMove={x:e.currentNode.x,y:e.currentNode.y,color:e.currentNode.color}:e.lastMove=null,m("Hamle geri alƒ±ndƒ±.","#f1c40f"),v()},U=e=>{const t=u.current;if(t.mode==="RECORD"){if(!t.currentNode||t.currentNode===t.moveTree){m("Hen√ºz hamle yok!","#e74c3c");return}t.currentNode.status=e,m(e==="correct"?"‚úÖ ƒ∞≈üaretlendi":"‚ùå ƒ∞≈üaretlendi",e==="correct"?"#2ecc71":"#e74c3c")}},oe=()=>{const e=u.current,t=f=>{const{parent:d,...N}=f;return N.children&&N.children.length>0&&(N.children=N.children.map(S=>t(S))),N},o=t(e.moveTree),r=prompt("Soru Ba≈ülƒ±ƒüƒ±:")||"Yeni Soru",n=prompt("Kategori:")||"Genel",l=prompt("A√ßƒ±klama:")||"",i={id:`prob-${Date.now()}`,size:e.size,labels:JSON.stringify(e.labels),turn:e.recordingStartColor,title:r,category:n,description:l,initialState:e.initialStateStr||JSON.stringify(e.stones),lastMove:e.lastMove,solution:o},c=JSON.stringify(i,null,2).replace(/"([a-zA-Z0-9_]+)":/g,"$1:");console.log("--- JS OBJE √áIKTISI ---"),console.log(c),navigator.clipboard.writeText(c).then(()=>alert("JS Objesi formatƒ±nda kopyalandƒ±!")).catch(()=>{console.error("Kopyalama ba≈üarƒ±sƒ±z, konsola yazƒ±ldƒ±."),console.log(c)})},ne=()=>{const e=u.current;e.turn=e.turn==="black"?"white":"black",C(e.turn)},E=(e,t)=>e>=0&&e<u.current.size&&t>=0&&t<u.current.size,A=(e,t,o,r,n=new Set)=>{const l=`${e},${t}`;if(n.has(l))return 0;n.add(l);let i=0;return[[e+1,t],[e-1,t],[e,t+1],[e,t-1]].forEach(([a,c])=>{E(a,c)&&(r[a][c]?r[a][c].color===o&&(i+=A(a,c,o,r,n)):i++)}),i},_=(e,t,o,r)=>{const n=r[e][t];!n||n.color!==o||(r[e][t]=null,[[e+1,t],[e-1,t],[e,t+1],[e,t-1]].forEach(([l,i])=>{E(l,i)&&_(l,i,o,r)}))},M=(e,t,o)=>{const r=u.current,n=JSON.stringify(r.stones),l=JSON.parse(n);if(l[e][t])return!1;l[e][t]={color:o};let i=!1;const a=o==="black"?"white":"black";if([[e+1,t],[e-1,t],[e,t+1],[e,t-1]].forEach(([f,d])=>{E(f,d)&&l[f][d]&&l[f][d].color===a&&A(f,d,a,l)===0&&(_(f,d,a,l),i=!0)}),!i&&A(e,t,o,l)===0)return m("ƒ∞ntihar Yasak!","#e74c3c"),!1;const c=JSON.stringify(l);return r.history.includes(c)?(m("Ko Kuralƒ±!","#e74c3c"),!1):(r.history.push(n),r.stones=l,r.lastMove={x:e,y:t,color:o},O.current&&(O.current.currentTime=0,O.current.play().catch(()=>{})),!0)},v=()=>{const e=p.current;if(!e)return;const t=e.getContext("2d"),o=u.current,r=o.size,n=Math.max(2,window.devicePixelRatio||1),l=e.getBoundingClientRect(),i=Math.floor(l.width);e.style.width=`${i}px`,e.style.height=`${i}px`,e.width=i*n,e.height=i*n,t.save(),t.setTransform(n,0,0,n,0,0),t.imageSmoothingEnabled=!0,t.imageSmoothingQuality&&(t.imageSmoothingQuality="high");const a=36,c=(i-a*2)/(r-1);t.clearRect(0,0,i,i),t.fillStyle="#f4b35f",t.fillRect(0,0,i,i),t.strokeStyle="#2b1d0e",t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.beginPath();for(let S=0;S<r;S++){const y=a+S*c,R=Math.round(y)+.5;t.moveTo(R,a+.5),t.lineTo(R,i-a+.5),t.moveTo(a+.5,R),t.lineTo(i-a+.5,R)}t.stroke();const f=r===19?[3,9,15]:r===13?[3,6,9]:[2,4,6];if(t.fillStyle="#000",f.forEach(S=>f.forEach(y=>{t.beginPath(),t.arc(a+S*c,a+y*c,3,0,Math.PI*2),t.fill()})),o.stones.forEach((S,y)=>{S.forEach((R,ce)=>{R&&H(t,y,ce,R.color,c,a,1)})}),o.lastMove){const{x:S,y}=o.lastMove;t.beginPath(),t.arc(a+S*c,a+y*c,c*.15,0,Math.PI*2),t.fillStyle=o.stones[S][y].color==="black"?"#fff":"#000",t.fill()}const{x:d,y:N}=o.hoverPos;if(d>=0&&N>=0&&!o.stones[d][N]&&!o.isLocked){const S=o.turn;H(t,d,N,S,c,a,.45)}t.restore()},H=(e,t,o,r,n,l,i)=>{const a=l+t*n,c=l+o*n,f=n*.47;if(e.save(),e.globalAlpha=i,e.beginPath(),e.arc(a,c,f,0,Math.PI*2),r==="black"){const d=e.createRadialGradient(a-f*.3,c-f*.3,0,a,c,f);d.addColorStop(0,"#666"),d.addColorStop(.5,"#333"),d.addColorStop(1,"#000"),e.fillStyle=d}else{const d=e.createRadialGradient(a-f*.3,c-f*.3,0,a,c,f);d.addColorStop(0,"#fff"),d.addColorStop(.6,"#f5f5f5"),d.addColorStop(1,"#e0e0e0"),e.fillStyle=d}e.fill(),e.restore()},se=e=>{const t=u.current;if(t.isLocked&&t.mode==="SOLVE"){p.current.style.cursor="default";return}const o=p.current.getBoundingClientRect(),r=36,n=(o.width-r*2)/(t.size-1),l=e.clientX-o.left-r,i=e.clientY-o.top-r,a=Math.round(l/n),c=Math.round(i/n);E(a,c)?(t.hoverPos.x!==a||t.hoverPos.y!==c)&&(t.hoverPos={x:a,y:c},p.current.style.cursor="pointer",requestAnimationFrame(v)):(t.hoverPos={x:-1,y:-1},p.current.style.cursor="default",requestAnimationFrame(v))},ae=()=>{const e=u.current,{x:t,y:o}=e.hoverPos;if(!(!E(t,o)||e.isLocked)&&!e.stones[t][o]){if(e.mode==="SETUP"){e.stones[t][o]={color:e.turn},v();return}if(e.mode==="RECORD"){const r=e.turn;if(M(t,o,r)){const n={x:t,y:o,color:r,children:[],status:null,parent:e.currentNode},l=e.currentNode.children.find(i=>i.x===t&&i.y===o);l?(e.currentNode=l,m("Mevcut varyasyon","#3498db")):(e.currentNode.children.push(n),e.currentNode=n),e.turn=e.turn==="black"?"white":"black",C(e.turn),v()}return}if(e.mode==="SOLVE"){const r=e.currentNode.children?.find(n=>n.x===t&&n.y===o);r?(M(t,o,r.color),e.currentNode=r,e.turn=e.turn==="black"?"white":"black",C(e.turn),v(),r.children&&r.children.length>0?setTimeout(()=>{const n=r.children[0];M(n.x,n.y,n.color),e.currentNode=n,e.turn=e.turn==="black"?"white":"black",C(e.turn),v(),V(n)},500):V(r)):e.hasSolution?(m("Yanlƒ±≈ü Hamle","#e74c3c"),e.isLocked=!0,g&&g(!1)):(M(t,o,e.turn),e.turn=e.turn==="black"?"white":"black",C(e.turn),v())}}},V=e=>{if(e.children&&e.children.length>0){e.status==="wrong"&&(m("Yanlƒ±≈ü Yol","#e74c3c"),g&&g(!1));return}e.status==="correct"?(m("Tebrikler! Doƒüru √á√∂z√ºm.","#2ecc71"),u.current.isLocked=!0,g&&g(!0)):e.status==="wrong"?(m("Yanlƒ±≈ü Yol","#e74c3c"),u.current.isLocked=!0,g&&g(!1)):(!e.children||e.children.length===0)&&(m("Tebrikler!","#2ecc71"),u.current.isLocked=!0,g&&g(!0))},m=(e,t)=>{P(e),Z(t)},W=()=>requestAnimationFrame(v),ie=()=>q();return s.jsxs("div",{className:"go-app-react",ref:b,children:[(!x||J==="RECORD")&&s.jsx("div",{className:"top-info-bar",children:s.jsxs("div",{className:"turn-badge",children:[s.jsx("div",{className:`turn-indicator ${z}`}),s.jsx("span",{children:z==="black"?"Siyah":"Beyaz"})]})}),w&&!x&&s.jsx("div",{className:"go-hint-box",children:w}),s.jsx("div",{className:"status",style:{color:K},children:j}),s.jsx("div",{className:"go-wrapper-shadow",children:s.jsxs("div",{className:"go-container",children:[s.jsxs("div",{className:"coords-layer",children:[B.col.map((e,t)=>s.jsx("span",{className:"coord-label col",style:{left:`${t*100/(u.current.size-1)}%`},children:e},`c-${t}`)),B.row.map((e,t)=>s.jsx("span",{className:"coord-label row",style:{top:`${t*100/(u.current.size-1)}%`},children:e},`r-${t}`))]}),s.jsx("canvas",{ref:p,className:"goBoard",onMouseMove:se,onMouseLeave:()=>{u.current.hoverPos={x:-1,y:-1},v()},onClick:ae})]})}),x&&s.jsxs("div",{className:"bottom-controls",style:{flexWrap:"wrap",justifyContent:"center"},children:[s.jsx("button",{className:"control-btn resetBtn",onClick:ie,title:"Ba≈üa D√∂n",children:"‚Ü∫"}),s.jsxs("div",{className:"teacher-controls",style:{display:"flex",gap:"10px",alignItems:"center",marginLeft:"10px"},children:[s.jsx("div",{style:{width:"1px",height:"30px",background:"#555"}}),J==="SETUP"?s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{display:"flex",gap:"5px"},children:[9,13,19].map(e=>s.jsx("button",{onClick:()=>te(e),style:{background:D===e?"#3498db":"transparent",border:"1px solid #7f8c8d",color:D===e?"white":"#bdc3c7",borderRadius:"4px",padding:"5px 10px",cursor:"pointer"},children:e},e))}),s.jsx("div",{style:{width:"1px",height:"30px",background:"#555"}}),s.jsx("button",{className:"control-btn",onClick:()=>ne(),title:"Renk Deƒüi≈ütir",children:s.jsx("div",{className:`turn-indicator ${z==="black"?"white":"black"}`})}),s.jsx("button",{className:"control-btn",style:{borderRadius:"5px",width:"auto",padding:"0 10px",fontSize:"0.9rem"},onClick:()=>G("RECORD"),children:"üî¥ Kayƒ±t"})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"control-btn",style:{background:"#2ecc71"},onClick:()=>U("correct"),title:"Doƒüru",children:"‚úÖ"}),s.jsx("button",{className:"control-btn",style:{background:"#e74c3c"},onClick:()=>U("wrong"),title:"Yanlƒ±≈ü",children:"‚ùå"}),s.jsx("button",{className:"control-btn",style:{background:"#e67e22"},onClick:re,title:"Bir Adƒ±m Geri Al",children:"‚Ü©Ô∏è"}),s.jsx("div",{style:{width:"1px",height:"30px",background:"#555"}}),s.jsx("button",{className:"control-btn",style:{borderRadius:"5px",width:"auto",padding:"0 10px",fontSize:"0.9rem"},onClick:oe,children:"üíæ ƒ∞ndir"}),s.jsx("button",{className:"control-btn",style:{fontSize:"0.8rem"},onClick:()=>G("SETUP"),title:"Setup",children:"‚öôÔ∏è"})]})]})]})]})};export{he as G,s as j};
