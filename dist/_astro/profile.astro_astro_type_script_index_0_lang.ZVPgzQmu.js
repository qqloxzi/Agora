import{s as n}from"./supabase.DgUM0jQD.js";async function d(){const{data:{user:a}}=await n.auth.getUser();if(!a){window.location.href="/signup";return}const t={username:document.getElementById("display-username"),email:document.getElementById("display-email"),avatarInitial:document.getElementById("avatar-initial"),infoDate:document.getElementById("info-date"),displayRank:document.getElementById("display-rank"),currentXp:document.getElementById("current-xp"),xpBar:document.getElementById("xp-bar")};t.email&&(t.email.textContent=a.email||"");const{data:e,error:i}=await n.from("agorasusers").select("*").eq("id",a.id).single();i&&console.error("Profil hatasÄ±:",i);const o=e?.username||a.email?.split("@")[0]||"Oyuncu";if(t.username&&(t.username.textContent=o),t.infoDate&&e?.created_at&&(t.infoDate.textContent=new Date(e.created_at).toLocaleDateString("tr-TR")),t.avatarInitial&&(t.avatarInitial.textContent=(o[0]||"?").toUpperCase()),e){t.displayRank&&(t.displayRank.textContent=e.rank||"20 Kyu");const r=e.xp||0;if(t.currentXp&&(t.currentXp.textContent=`${r} XP`),t.xpBar){const s=r%100;t.xpBar.style.width=`${Math.max(10,s)}%`}}}const l=document.getElementById("logout-btn");l&&l.addEventListener("click",async()=>{await n.auth.signOut(),window.location.href="/signup"});d();
