import{c as w}from"./index.0LnPeXwf.js";const o=document.getElementById("loader"),d=document.getElementById("content"),u=document.getElementById("c-title"),E=document.getElementById("c-desc"),b=document.getElementById("c-provider"),m=document.getElementById("c-provider-stat"),g=document.getElementById("c-price"),f=document.getElementById("c-level"),p=document.getElementById("c-duration"),y=document.getElementById("c-students"),r=document.getElementById("c-outcomes-list"),x=document.getElementById("c-img"),t=document.getElementById("join-btn"),c=document.getElementById("status-msg"),i=w("https://gncxqiarmnyspvrlsutp.supabase.co","sb_publishable_sWU29ifFK2XJIbx7GoLD5g_lMaWWo2f"),T=new URLSearchParams(window.location.search),h=T.get("slug");async function I(){if(!o||!d||!u||!t)return;if(!h){alert("Kurs URL hatası. Listeye yönlendiriliyorsunuz."),window.location.href="/courses";return}const{data:e,error:k}=await i.from("courses").select("*").eq("slug",h).single();if(k||!e){o.innerHTML="<p class='text-red-500 font-bold'>Kurs bulunamadı.</p>";return}document.title=`${e.title} | Agora`,u.innerText=e.title,E.innerText=e.description;const a=e.provider||"Agora Academy";b.innerText=a,m&&(m.innerText=a),g&&(g.innerText=e.price||"Ücretsiz"),f&&(f.innerText=e.level||"Başlangıç"),p&&(p.innerText=e.duration||"Esnek Süre"),y&&e.students_count&&(y.innerText=e.students_count),x&&(x.src=e.image_url||"https://via.placeholder.com/600x400"),r&&(r.innerHTML="",e.outcomes?e.outcomes.split(`
`).forEach(l=>{if(l.trim()!==""){const B=`
                            <div class="flex gap-3 items-start">
                                <svg class="w-5 h-5 text-green-600 dark:text-green-400 shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                                <span class="leading-relaxed">${l}</span>
                            </div>
                        `;r.innerHTML+=B}}):r.innerHTML="<p class='text-gray-500 italic'>Detaylı kazanım bilgisi eklenmemiş.</p>"),o.classList.add("hidden"),d.classList.remove("hidden");const{data:{user:s}}=await i.auth.getUser();if(s){const{data:n}=await i.from("course_enrollments").select("*").eq("user_id",s.id).eq("course_id",e.id).single();n&&v()}t.addEventListener("click",async()=>{if(!s){alert("Kursa katılmak için lütfen giriş yapın."),window.location.href="/login";return}t.innerText="Kaydediliyor...",t.disabled=!0,t.classList.add("opacity-75","cursor-not-allowed");const{error:n}=await i.from("course_enrollments").insert({user_id:s.id,course_id:e.id});n?(t.innerText="Hata Oluştu",t.disabled=!1,t.classList.remove("opacity-75","cursor-not-allowed"),console.error(n)):(v(),alert("Başarıyla kayıt oldunuz! İyi dersler."))})}function v(){t&&c&&(t.innerText="Derse Git →",t.className="bg-green-600 hover:bg-green-700 text-white text-lg font-bold py-3 px-10 rounded shadow-md transition-all",t.onclick=()=>{alert("Ders içeriği yakında eklenecek!")},c.innerText="Bu kurs kütüphanenizde mevcut.",c.className="text-sm font-bold mt-3 text-green-600 dark:text-green-400 flex items-center gap-1 before:content-['✓']")}I();
