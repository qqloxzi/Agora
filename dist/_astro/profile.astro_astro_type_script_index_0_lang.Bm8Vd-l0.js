import{s as i}from"./supabase.DgUM0jQD.js";async function x(){const{data:{user:a}}=await i.auth.getUser();if(!a){window.location.href="/signup";return}const e={username:document.getElementById("display-username"),email:document.getElementById("display-email"),infoUsername:document.getElementById("info-username"),infoDate:document.getElementById("info-date"),avatarInitial:document.getElementById("avatar-initial"),levelBadge:document.getElementById("display-level"),currentXp:document.getElementById("current-xp"),xpBar:document.getElementById("xp-bar"),xpNeeded:document.getElementById("xp-needed"),statCompleted:document.getElementById("stat-completed"),badgesContainer:document.getElementById("badges-container")};e.email&&(e.email.textContent=a.email||"");const{data:n,error:l}=await i.from("agorasusers").select("*").eq("id",a.id).single(),{data:y,count:r}=await i.from("user_progress").select("category_id",{count:"exact"}).eq("user_id",a.id);l&&console.error("Profil hatasÄ±:",l);const o=n?.username||a.email?.split("@")[0]||"Oyuncu";e.username&&(e.username.textContent=o),e.infoUsername&&(e.infoUsername.textContent=o),e.infoDate&&n?.created_at&&(e.infoDate.textContent=new Date(n.created_at).toLocaleDateString("tr-TR")),e.avatarInitial&&(e.avatarInitial.textContent=(o[0]||"?").toUpperCase());const m=n?.xp||0,g=n?.level||1,d=100,c=m%d,p=c/d*100,f=d-c;if(e.levelBadge&&(e.levelBadge.textContent=`Lvl ${g}`),e.currentXp&&(e.currentXp.textContent=m.toString()),e.xpNeeded&&(e.xpNeeded.textContent=f.toString()),e.xpBar){const v=e.xpBar;setTimeout(()=>{v.style.width=`${p}%`},100)}e.statCompleted&&(e.statCompleted.textContent=(r||0).toString());const t=[],s=r||0;s>=1?t.push('<div class="badge-item unlocked" title="Ä°lk AdÄ±m: 1 Set TamamlandÄ±">ğŸŒ±</div>'):t.push('<div class="badge-item locked" title="1 Set Tamamla">ğŸ”’</div>'),s>=5?t.push('<div class="badge-item unlocked" title="Ã‡Ä±rak: 5 Set TamamlandÄ±">ğŸ”¨</div>'):t.push('<div class="badge-item locked" title="5 Set Tamamla">ğŸ”’</div>'),s>=10?t.push('<div class="badge-item unlocked" title="Usta: 10 Set TamamlandÄ±">âš”ï¸</div>'):t.push('<div class="badge-item locked" title="10 Set Tamamla">ğŸ”’</div>'),e.badgesContainer&&(e.badgesContainer.innerHTML=t.join(""))}const u=document.getElementById("logout-btn");u&&u.addEventListener("click",async()=>{await i.auth.signOut(),window.location.href="/signup"});x();
