import{j as e,G as L}from"./GoBoardReact.BJ1RuH4J.js";import{r as i}from"./index.DiEladB3.js";import{s as v}from"./supabase.DgUM0jQD.js";const O=[{title:"(20-18 kyu) BaÅŸlangÄ±Ã§",levels:[{id:"Kurallar",label:"Kurallar",icon:"ðŸ“œ",parent:null},{id:"Esir Alma 1",label:"Esir Alma 1",icon:"âœŠ",parent:"Kurallar"},{id:"BaÄŸlanma & Kesme",label:"BaÄŸlanma & Kesme",icon:"ðŸ”—",parent:"Esir Alma 1"},{id:"Nefes YarÄ±ÅŸÄ± 1",label:"Nefes YarÄ±ÅŸÄ± 1",icon:"ðŸŒ¬ï¸",parent:"BaÄŸlanma & Kesme"},{id:"YaÅŸam & Ã–lÃ¼m 1",label:"YaÅŸam & Ã–lÃ¼m 1",icon:"ðŸ‘ï¸",parent:"Kurallar"},{id:"KaÃ§Ä±ÅŸ Yolu",label:"KaÃ§Ä±ÅŸ Yolu",icon:"ðŸƒ",parent:"YaÅŸam & Ã–lÃ¼m 1"},{id:"Oyunu Sona Erdirme",label:"Oyunu Sona Erdirme",icon:"ðŸ",parent:"YaÅŸam & Ã–lÃ¼m 1"},{id:"Tesuji 1",label:"Tesuji 1",icon:"ðŸ’¡",parent:"KaÃ§Ä±ÅŸ Yolu"},{id:"Merdiven ile Esir Alma",label:"Merdiven ile Esir Alma",icon:"ðŸªœ",parent:"Tesuji 1"},{id:"AÄŸ ile Esir Alma",label:"AÄŸ ile Esir Alma",icon:"ðŸ•¸ï¸",parent:"Tesuji 1"}]},{title:"(17-12 kyu) Temel TaÅŸlar",levels:[{id:"YaÅŸam & Ã–lÃ¼m 2",label:"YaÅŸam & Ã–lÃ¼m 2",icon:"â˜ ï¸",parent:null},{id:"GÃ¼Ã§lÃ¼ & ZayÄ±f Åžekiller",label:"GÃ¼Ã§lÃ¼ & ZayÄ±f Åžekiller",icon:"ðŸ”·",parent:"YaÅŸam & Ã–lÃ¼m 2"},{id:"GÃ¼Ã§lÃ¼ & ZayÄ±f Gruplar",label:"GÃ¼Ã§lÃ¼ & ZayÄ±f Gruplar",icon:"ðŸ°",parent:"GÃ¼Ã§lÃ¼ & ZayÄ±f Åžekiller"},{id:"BÃ¼yÃ¼k & Acil Hamleler",label:"BÃ¼yÃ¼k & Acil Hamleler",icon:"ðŸš¨",parent:"GÃ¼Ã§lÃ¼ & ZayÄ±f Åžekiller"},{id:"AÃ§Ä±lÄ±ÅŸ SafhasÄ±",label:"AÃ§Ä±lÄ±ÅŸ SafhasÄ±",icon:"ðŸŒ…",parent:"YaÅŸam & Ã–lÃ¼m 2"},{id:"Joseki 1",label:"Joseki 1",icon:"ðŸ§©",parent:"AÃ§Ä±lÄ±ÅŸ SafhasÄ±"},{id:"Oyun YÃ¶nÃ¼ 1",label:"Oyun YÃ¶nÃ¼ 1",icon:"ðŸ§­",parent:"AÃ§Ä±lÄ±ÅŸ SafhasÄ±"},{id:"Oyun OrtasÄ± 1",label:"Oyun OrtasÄ± 1",icon:"âš”ï¸",parent:"Oyun YÃ¶nÃ¼ 1"},{id:"Oyun Sonu 1",label:"Oyun Sonu 1",icon:"ðŸ“",parent:"Oyun YÃ¶nÃ¼ 1"}]},{title:"(11-6 kyu) GeliÅŸim",levels:[{id:"YaÅŸam & Ã–lÃ¼m 3",label:"YaÅŸam & Ã–lÃ¼m 3",icon:"ðŸš‘",parent:null},{id:"Oyun YÃ¶nÃ¼ 2",label:"Oyun YÃ¶nÃ¼ 2",icon:"ðŸ”­",parent:"YaÅŸam & Ã–lÃ¼m 3"},{id:"Oyun OrtasÄ± 2",label:"Oyun OrtasÄ± 2",icon:"ðŸ”¥",parent:"Oyun YÃ¶nÃ¼ 2"},{id:"Oyun Sonu 2",label:"Oyun Sonu 2",icon:"ðŸ§®",parent:"Oyun YÃ¶nÃ¼ 2"},{id:"Tesuji 2",label:"Tesuji 2",icon:"âš¡",parent:"YaÅŸam & Ã–lÃ¼m 3"},{id:"Ko",label:"Ko",icon:"ðŸ”",parent:"Tesuji 2"},{id:"Joseki 2",label:"Joseki 2",icon:"ðŸ“š",parent:"Ko"},{id:"Sente & Gote",label:"Sente & Gote",icon:"â©",parent:"Tesuji 2"},{id:"Ä°stila & KÃ¼Ã§Ã¼ltme",label:"Ä°stila & KÃ¼Ã§Ã¼ltme",icon:"ðŸª‚",parent:"Sente & Gote"},{id:"SaldÄ±rÄ± & Savunma",label:"SaldÄ±rÄ± & Savunma",icon:"ðŸ›¡ï¸",parent:"Sente & Gote"}]},{title:"(5kyu-1dan) AydÄ±nlanma",levels:[{id:"Oyun YÃ¶nÃ¼ 2",label:"Oyun YÃ¶nÃ¼ 2",icon:"ðŸª",parent:null},{id:"Tesuji 3",label:"Tesuji 3",icon:"ðŸ’Ž",parent:"Oyun YÃ¶nÃ¼ 2"},{id:"Joseki 3",label:"Joseki 3",icon:"ðŸ—¿",parent:"Tesuji 3"},{id:"YaÅŸam & Ã–lÃ¼m 4",label:"YaÅŸam & Ã–lÃ¼m 4",icon:"ðŸ‘»",parent:"Joseki 3"},{id:"Hamle DeÄŸerleri",label:"Hamle DeÄŸerleri",icon:"âš–ï¸",parent:"Oyun YÃ¶nÃ¼ 2"},{id:"Pro KavrayÄ±ÅŸÄ±",label:"Pro KavrayÄ±ÅŸÄ±",icon:"ðŸ¥‹",parent:"Hamle DeÄŸerleri"},{id:"Yapay Zeka",label:"Yapay Zeka",icon:"ðŸ¤–",parent:"Hamle DeÄŸerleri"}]}],Z=t=>{const l=t.map(s=>({...s,children:[]})),d={};l.forEach(s=>d[s.id]=s);const r=[];return l.forEach(s=>{s.parent&&d[s.parent]?d[s.parent].children.push(s):r.push(s)}),r},A=({node:t,completedLevels:l,startLevel:d,allProblems:r})=>{const s=t.parent&&!l.includes(t.parent),b=l.includes(t.id),p=r.filter(m=>m.category===t.id).length;return e.jsxs("div",{className:"tree-node-container",children:[e.jsxs("div",{className:`level-node ${s?"locked":""} ${b?"completed":""}`,onClick:()=>d(t.id,s),title:t.label,children:[e.jsx("div",{className:"node-icon",children:t.icon}),p>0&&e.jsx("span",{className:"node-badge",children:p}),e.jsx("span",{className:"node-label",children:t.label})]}),t.children&&t.children.length>0&&e.jsx("div",{className:"node-children",children:t.children.map(m=>e.jsx(A,{node:m,completedLevels:l,startLevel:d,allProblems:r},m.id))})]})},M=({allProblems:t})=>{const[l,d]=i.useState(null),[r,s]=i.useState("tree"),[b,p]=i.useState([]),[m,w]=i.useState(null),[o,y]=i.useState(0),[S,g]=i.useState(!1),[N,x]=i.useState({correct:0,wrong:0}),[E,h]=i.useState(!1),[K,j]=i.useState(0);i.useEffect(()=>{(async()=>{const n=localStorage.getItem("goProgress");let c=n?JSON.parse(n):[];p(c);const{data:{user:u}}=await v.auth.getUser();if(u){w(u);const{data:k}=await v.from("user_progress").select("category_id").eq("user_id",u.id);if(k){const D=k.map(H=>H.category_id),Y=[...new Set([...c,...D])];p(Y),localStorage.setItem("goProgress",JSON.stringify(Y))}}})()},[]),i.useEffect(()=>(r==="playing"?document.body.classList.add("fullscreen-mode"):document.body.classList.remove("fullscreen-mode"),()=>document.body.classList.remove("fullscreen-mode")),[r]),i.useEffect(()=>{if(r==="playing"){const a=l?.problems[o],n=a?.solution&&(a.solution.length>0||a.solution.children?.length>0);g(!n)}},[o,r,l]);const G=async a=>{if(!b.includes(a)){const n=[...b,a];if(p(n),localStorage.setItem("goProgress",JSON.stringify(n)),m)try{await v.from("user_progress").insert({user_id:m.id,category_id:a,completed_at:new Date})}catch(c){console.error(c)}}s("result")},T=(a,n)=>{if(n)return alert("Ã–nce bir Ã¶nceki seviyeyi tamamlamalÄ±sÄ±n!");const c=t.filter(u=>u.category===a);if(c.length===0)return alert("Bu kategoride soru yok.");d({id:a,problems:c}),y(0),x({correct:0,wrong:0}),h(!1),j(0),s("playing")},C=()=>{l&&o<l.problems.length-1?(y(a=>a+1),h(!1),j(a=>a+1)):G(l.id)},P=()=>{j(a=>a+1),h(!1)},B=a=>{a?(g(!0),S||x(E?n=>({...n,wrong:n.wrong+1}):n=>({...n,correct:n.correct+1}))):h(!0)},f=l?l.problems[o]:null,J=l?(o+1)/l.problems.length*100:0;return e.jsxs("div",{className:"game-manager-container",children:[r==="tree"&&e.jsxs("div",{className:"tree-view",children:[e.jsxs("header",{className:"tree-header",children:[e.jsx("h1",{children:"ðŸŒ³ Go Yetenek AÄŸacÄ±"}),e.jsx("p",{children:"YukarÄ±dan baÅŸla, kÃ¶kleri salarak ilerle."}),!m&&e.jsx("p",{style:{color:"#ef4444",fontSize:"0.9rem"},children:"âš ï¸ Ä°lerlemenizin kaydedilmesi iÃ§in giriÅŸ yapmalÄ±sÄ±nÄ±z."})]}),e.jsx("div",{className:"tree-scroll-container",children:O.map((a,n)=>{const c=Z(a.levels);return e.jsxs("div",{className:"tree-section",children:[e.jsx("h2",{className:"section-title",style:{textAlign:"center",marginTop:"40px",color:"#2c3e50"},children:a.title}),e.jsx("div",{className:"org-tree",children:c.map(u=>e.jsx(A,{node:u,completedLevels:b,startLevel:T,allProblems:t},u.id))}),n!==O.length-1&&e.jsx("hr",{style:{margin:"40px auto",width:"50%",opacity:.3}})]},n)})})]}),r==="playing"&&f&&e.jsx("div",{className:"playing-view",children:e.jsx("div",{className:"game-layout",children:e.jsxs("div",{className:"board-section board-section-full",children:[e.jsxs("div",{className:"game-navbar",children:[e.jsxs("h3",{children:[l.id," ",e.jsxs("span",{style:{opacity:.6,fontSize:"0.8em"},children:["(",o+1," / ",l.problems.length,")"]})]}),e.jsx("button",{className:"exit-btn",onClick:()=>s("tree"),children:"âœ• Ã‡Ä±kÄ±ÅŸ"})]}),e.jsx("div",{className:"progress-container",children:e.jsx("div",{className:"progress-fill",style:{width:`${J}%`}})}),e.jsx(L,{problem:f,onSolve:B,description:f.description||"Bu hamleyi dikkatli dÃ¼ÅŸÃ¼n."},`${o}-${K}`),e.jsxs("div",{className:"game-controls-bottom",children:[e.jsx("button",{className:"control-pill-btn btn-prev",disabled:o===0,onClick:()=>{y(a=>a-1),g(!0)},children:"â† Geri"}),e.jsx("button",{className:"control-pill-btn btn-restart",onClick:P,title:"Yeniden BaÅŸlat",children:"â†º"}),e.jsx("button",{className:"control-pill-btn btn-next",disabled:!S,onClick:C,children:o===l.problems.length-1?"Bitir":"Sonraki â†’"})]})]})})}),r==="result"&&e.jsx("div",{className:"result-overlay",children:e.jsxs("div",{className:"result-card",children:[e.jsx("div",{style:{fontSize:"4rem",marginBottom:"10px"},children:"ðŸŽ‰"}),e.jsx("h2",{className:"result-title",children:"Tebrikler!"}),e.jsxs("p",{className:"result-subtitle",children:['"',l?.id,'" seviyesini tamamladÄ±n.']}),e.jsxs("div",{className:"stats-row",children:[e.jsxs("div",{className:"stat-box correct",children:[e.jsx("span",{className:"stat-number",children:N.correct}),e.jsx("span",{className:"stat-label",children:"DoÄŸru"})]}),e.jsxs("div",{className:"stat-box wrong",children:[e.jsx("span",{className:"stat-number",children:N.wrong}),e.jsx("span",{className:"stat-label",children:"YanlÄ±ÅŸ"})]})]}),e.jsx("button",{className:"nav-btn",style:{background:"var(--tree-accent)",color:"white",width:"100%",padding:"15px",fontSize:"1.1rem"},onClick:()=>s("tree"),children:"AÄŸaca DÃ¶n ve Devam Et â†’"})]})})]})};export{M as default};
