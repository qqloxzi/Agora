import{s as a}from"./supabase.DgUM0jQD.js";async function d(){const n=document.getElementById("auth-guest"),s=document.getElementById("auth-user"),r=document.getElementById("user-nav-name"),u=document.getElementById("user-nav-level"),o=document.getElementById("user-nav-avatar");if(!(!n||!s))try{const{data:{session:t}}=await a.auth.getSession();if(t){n.classList.add("auth-hidden"),s.classList.remove("auth-hidden");const{data:e,error:l}=await a.from("agorasusers").select("username, level, avatar_url").eq("id",t.user.id).single();e&&!l&&(r&&(r.innerText=e.username||"Kullanıcı"),u&&(u.innerText=`Seviye: ${e.level||1}`),o&&e.avatar_url&&(o.src=e.avatar_url))}else n.classList.remove("auth-hidden"),s.classList.add("auth-hidden")}catch(t){console.error("Navigasyon hatası:",t)}}const i=document.getElementById("logout-nav-btn");i&&i.addEventListener("click",async()=>{await a.auth.signOut(),window.location.href="/login"});a.auth.onAuthStateChange(()=>d());d();
