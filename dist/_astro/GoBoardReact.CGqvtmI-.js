import{r as k}from"./index.DYrVU9rO.js";var B={exports:{}},T={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K;function ue(){if(K)return T;K=1;var f=Symbol.for("react.transitional.element"),b=Symbol.for("react.fragment");function g(w,p,y){var j=null;if(y!==void 0&&(j=""+y),p.key!==void 0&&(j=""+p.key),"key"in p){y={};for(var u in p)u!=="key"&&(y[u]=p[u])}else y=p;return p=y.ref,{$$typeof:f,type:w,key:j,ref:p!==void 0?p:null,props:y}}return T.Fragment=b,T.jsx=g,T.jsxs=g,T}var Z;function de(){return Z||(Z=1,B.exports=ue()),B.exports}var s=de();const he=({problem:f,isTeacher:b=!1,onSolve:g=null,description:w=""})=>{const p=k.useRef(null),y=k.useRef(null),j=k.useRef(!1),u=k.useRef({size:9,stones:[],labels:[],turn:"black",history:[],moveTree:{children:[]},currentNode:null,lastMove:null,isLocked:!1,hoverPos:{x:-1,y:-1},hasSolution:!1,mode:"SOLVE",initialStateStr:"",recordingStartColor:"black"}),[ee,M]=k.useState(""),[te,L]=k.useState("#fff"),[P,N]=k.useState("black"),[J,re]=k.useState({col:[],row:[]}),[$,D]=k.useState("SETUP"),[Y,q]=k.useState(9),O=k.useRef(typeof Audio<"u"?new Audio("/sounds/stone.mp3"):null);k.useEffect(()=>(F(),window.addEventListener("resize",X),()=>window.removeEventListener("resize",X)),[f]);const F=()=>{const e=u.current;if(e.size=f?.size||9,q(e.size),G(e.size),e.turn=f?.turn||"black",e.recordingStartColor=e.turn,e.lastMove=f?.lastMove||null,e.mode=b?"SETUP":"SOLVE",D(e.mode),f?.solution)if(Array.isArray(f.solution)&&f.solution.length>0){let t={children:[]};e.moveTree=t,f.solution.forEach(n=>{const r={...n,children:[],status:null};t.children.push(r),t=r}),t.status="correct",e.hasSolution=!0}else f.solution.children?(e.moveTree=f.solution,e.hasSolution=!0):(e.moveTree={children:[]},e.hasSolution=!1);else e.moveTree={children:[]},e.hasSolution=!1;if(e.currentNode=e.moveTree,f?.initialState)try{const t=typeof f.initialState=="string"?JSON.parse(f.initialState):f.initialState;Array.isArray(t)&&t.length>0&&(e.stones=t,e.initialStateStr=typeof f.initialState=="string"?f.initialState:JSON.stringify(t))}catch(t){console.error("Parse Error",t)}N(e.turn),M(b?"√ñƒüretmen Modu: SETUP":e.hasSolution?"":"Analiz Modu"),I(e.size),requestAnimationFrame(v)},G=e=>{const t=u.current;t.size=e,t.stones=Array(e).fill(0).map(()=>Array(e).fill(null)),t.labels=Array(e).fill(0).map(()=>Array(e).fill(null)),t.history=[],t.isLocked=!1,t.hoverPos={x:-1,y:-1}},I=e=>{const t=[],n=[];for(let r=0;r<e;r++)t.push(String.fromCharCode(65+(r>=8?r+1:r)));for(let r=0;r<e;r++)n.push(e-r);re({col:t,row:n})},ne=e=>{if(!b)return;const t=u.current;t.size=e,q(e),G(e),t.moveTree={children:[]},t.currentNode=t.moveTree,t.initialStateStr="",t.history=[],t.lastMove=null,I(e),M(`${e}x${e} Tahta Hazƒ±r`),requestAnimationFrame(v)},U=e=>{const t=u.current;e==="SETUP"?(t.mode="SETUP",m("Ta≈ülarƒ± dizin.","#fff")):e==="RECORD"&&(t.initialStateStr=JSON.stringify(t.stones),t.recordingStartColor=t.turn,t.moveTree={children:[]},t.currentNode=t.moveTree,t.history=[],t.mode="RECORD",m("Kayƒ±t Ba≈üladƒ±","#f1c40f")),D(e)},_=()=>{const e=u.current;if(!e.hasSolution){if(e.history.length===0){m("Ba≈ülangƒ±√ßtasƒ±nƒ±z","#e74c3c");return}const t=e.history.pop();e.stones=JSON.parse(t),e.turn=e.turn==="black"?"white":"black",N(e.turn),e.lastMove=null,m("Hamle geri alƒ±ndƒ±.","#f1c40f"),v();return}if(!e.currentNode||e.currentNode===e.moveTree){m("Ba≈ülangƒ±√ßtasƒ±nƒ±z, geri alƒ±namaz.","#e74c3c");return}if(e.history.length>0){const t=e.history.pop();e.stones=JSON.parse(t)}else e.initialStateStr&&(e.stones=JSON.parse(e.initialStateStr));e.currentNode.parent?e.currentNode=e.currentNode.parent:e.currentNode=e.moveTree,e.turn=e.turn==="black"?"white":"black",N(e.turn),e.currentNode&&e.currentNode!==e.moveTree?e.lastMove={x:e.currentNode.x,y:e.currentNode.y,color:e.currentNode.color}:e.lastMove=null,e.isLocked=!1,M(""),L("#fff"),v()},H=e=>{const t=u.current;if(t.mode==="RECORD"){if(!t.currentNode||t.currentNode===t.moveTree){m("Hen√ºz hamle yok!","#e74c3c");return}t.currentNode.status=e,m(e==="correct"?"‚úÖ ƒ∞≈üaretlendi":"‚ùå ƒ∞≈üaretlendi",e==="correct"?"#2ecc71":"#e74c3c")}},oe=()=>{const e=u.current,t=h=>{const{parent:d,...x}=h;return x.children&&x.children.length>0&&(x.children=x.children.map(S=>t(S))),x},n=t(e.moveTree),r=prompt("Soru Ba≈ülƒ±ƒüƒ±:")||"Yeni Soru",o=prompt("Kategori:")||"Genel",c=prompt("A√ßƒ±klama:")||"",i={id:`prob-${Date.now()}`,size:e.size,labels:JSON.stringify(e.labels),turn:e.recordingStartColor,title:r,category:o,description:c,initialState:e.initialStateStr||JSON.stringify(e.stones),solution:n},l=JSON.stringify(i,null,2).replace(/"([a-zA-Z0-9_]+)":/g,"$1:");console.log("--- JS OBJE √áIKTISI ---"),console.log(l),navigator.clipboard.writeText(l).then(()=>alert("JS Objesi formatƒ±nda kopyalandƒ±!")).catch(()=>{console.error("Kopyalama ba≈üarƒ±sƒ±z, konsola yazƒ±ldƒ±."),console.log(l)})},se=()=>{const e=u.current;e.turn=e.turn==="black"?"white":"black",N(e.turn)},E=(e,t)=>e>=0&&e<u.current.size&&t>=0&&t<u.current.size,A=(e,t,n,r,o=new Set)=>{const c=`${e},${t}`;if(o.has(c))return 0;o.add(c);let i=0;return[[e+1,t],[e-1,t],[e,t+1],[e,t-1]].forEach(([a,l])=>{E(a,l)&&(r[a][l]?r[a][l].color===n&&(i+=A(a,l,n,r,o)):i++)}),i},V=(e,t,n,r)=>{const o=r[e][t];!o||o.color!==n||(r[e][t]=null,[[e+1,t],[e-1,t],[e,t+1],[e,t-1]].forEach(([c,i])=>{E(c,i)&&V(c,i,n,r)}))},z=(e,t,n)=>{const r=u.current,o=JSON.stringify(r.stones),c=JSON.parse(o);if(c[e][t])return!1;c[e][t]={color:n};let i=!1;const a=n==="black"?"white":"black";if([[e+1,t],[e-1,t],[e,t+1],[e,t-1]].forEach(([h,d])=>{E(h,d)&&c[h][d]&&c[h][d].color===a&&A(h,d,a,c)===0&&(V(h,d,a,c),i=!0)}),!i&&A(e,t,n,c)===0)return m("Yasak Hamle","#e74c3c"),!1;const l=JSON.stringify(c);return r.history.includes(l)?(m("Ko Kuralƒ±!","#e74c3c"),!1):(r.history.push(o),r.stones=c,r.lastMove={x:e,y:t,color:n},O.current&&(O.current.currentTime=0,O.current.play().catch(()=>{})),!0)},v=()=>{const e=p.current;if(!e)return;const t=e.getContext("2d"),n=u.current,r=n.size,o=Math.max(2,window.devicePixelRatio||1),c=e.getBoundingClientRect(),i=Math.floor(c.width);e.style.width=`${i}px`,e.style.height=`${i}px`,e.width=i*o,e.height=i*o,t.save(),t.setTransform(o,0,0,o,0,0),t.imageSmoothingEnabled=!0,t.imageSmoothingQuality&&(t.imageSmoothingQuality="high");const a=i*.05,l=(i-a*2)/(r-1);t.clearRect(0,0,i,i),t.fillStyle="#f4b35f",t.fillRect(0,0,i,i),t.strokeStyle="#2b1d0e",t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.beginPath();for(let S=0;S<r;S++){const C=a+S*l,R=Math.round(C)+.5;t.moveTo(R,a+.5),t.lineTo(R,i-a+.5),t.moveTo(a+.5,R),t.lineTo(i-a+.5,R)}t.stroke();const h=r===19?[3,9,15]:r===13?[3,6,9]:[2,4,6];if(t.fillStyle="#000",h.forEach(S=>h.forEach(C=>{t.beginPath(),t.arc(a+S*l,a+C*l,3,0,Math.PI*2),t.fill()})),n.stones.forEach((S,C)=>{S.forEach((R,ce)=>{R&&W(t,C,ce,R.color,l,a,1)})}),n.lastMove){const{x:S,y:C}=n.lastMove;t.beginPath(),t.arc(a+S*l,a+C*l,l*.15,0,Math.PI*2),t.fillStyle=n.stones[S][C].color==="black"?"#fff":"#000",t.fill()}const{x:d,y:x}=n.hoverPos;if(d>=0&&x>=0&&!n.stones[d][x]&&!n.isLocked){const S=n.turn;W(t,d,x,S,l,a,.45)}t.restore()},W=(e,t,n,r,o,c,i)=>{const a=c+t*o,l=c+n*o,h=o*.47;if(e.save(),e.globalAlpha=i,e.beginPath(),e.arc(a,l,h,0,Math.PI*2),r==="black"){const d=e.createRadialGradient(a-h*.3,l-h*.3,0,a,l,h);d.addColorStop(0,"#666"),d.addColorStop(.5,"#333"),d.addColorStop(1,"#000"),e.fillStyle=d}else{const d=e.createRadialGradient(a-h*.3,l-h*.3,0,a,l,h);d.addColorStop(0,"#fff"),d.addColorStop(.6,"#f5f5f5"),d.addColorStop(1,"#e0e0e0"),e.fillStyle=d}e.fill(),e.restore()},ae=e=>{const t=u.current;if(t.isLocked&&t.mode==="SOLVE"){p.current.style.cursor="default";return}const n=p.current.getBoundingClientRect(),r=36,o=(n.width-r*2)/(t.size-1),c=e.clientX-n.left-r,i=e.clientY-n.top-r,a=Math.round(c/o),l=Math.round(i/o);E(a,l)?(t.hoverPos.x!==a||t.hoverPos.y!==l)&&(t.hoverPos={x:a,y:l},p.current.style.cursor="pointer",requestAnimationFrame(v)):(t.hoverPos={x:-1,y:-1},p.current.style.cursor="default",requestAnimationFrame(v))},ie=()=>{const e=u.current;if(j.current)return;const{x:t,y:n}=e.hoverPos;if(!(!E(t,n)||e.isLocked)&&!e.stones[t][n]){if(e.mode==="SETUP"){e.stones[t][n]={color:e.turn},v();return}if(e.mode==="RECORD"){const r=e.turn;if(z(t,n,r)){const o={x:t,y:n,color:r,children:[],status:null,parent:e.currentNode},c=e.currentNode.children.find(i=>i.x===t&&i.y===n);c?(e.currentNode=c,m("Mevcut varyasyon","#3498db")):(e.currentNode.children.push(o),e.currentNode=o),e.turn=e.turn==="black"?"white":"black",N(e.turn),v()}return}if(e.mode==="SOLVE"){const r=e.currentNode.children?.find(o=>o.x===t&&o.y===n);r?z(t,n,r.color)&&(e.currentNode=r,e.turn=e.turn==="black"?"white":"black",N(e.turn),v(),r.children&&r.children.length>0?(j.current=!0,setTimeout(()=>{const o=r.children[0];z(o.x,o.y,o.color)&&(e.currentNode=o,e.turn=e.turn==="black"?"white":"black",N(e.turn),v(),Q(o)),j.current=!1},200)):Q(r)):e.hasSolution?(m("Yanlƒ±≈ü Hamle","#e74c3c"),e.isLocked=!0,g&&g(!1)):z(t,n,e.turn)&&(e.turn=e.turn==="black"?"white":"black",N(e.turn),v())}}},Q=e=>{if(e.children&&e.children.length>0){e.status==="wrong"&&(m("Yanlƒ±≈ü Yol","#e74c3c"),g&&g(!1));return}e.status==="correct"?(m("Tebrikler! Serbest mod aktif.","#2ecc71"),u.current.isLocked=!1,u.current.hasSolution=!1,g&&g(!0)):e.status==="wrong"?(m("Yanlƒ±≈ü Yol","#e74c3c"),u.current.isLocked=!0,g&&g(!1)):(!e.children||e.children.length===0)&&(m("Tebrikler! √á√∂zd√ºn√ºz. Serbest analiz modu aktif.","#2ecc71"),u.current.isLocked=!1,u.current.hasSolution=!1,g&&g(!0))},m=(e,t)=>{M(e),L(t)},X=()=>requestAnimationFrame(v),le=()=>F();return s.jsxs("div",{className:"go-app-react",ref:y,children:[(!b||$==="RECORD")&&s.jsx("div",{className:"top-info-bar",children:s.jsxs("div",{className:"turn-badge",children:[s.jsx("div",{className:`turn-indicator ${P}`}),s.jsx("span",{children:P==="black"?"Siyah":"Beyaz"})]})}),w&&!b&&s.jsx("div",{className:"go-hint-box",children:w}),s.jsx("div",{className:"status",style:{color:te},children:ee}),s.jsx("div",{className:"go-wrapper-shadow",children:s.jsxs("div",{className:"go-container",children:[s.jsxs("div",{className:"coords-layer",children:[J.col.map((e,t)=>s.jsx("span",{className:"coord-label col",style:{left:`${4+t*92/(u.current.size-1)}%`,top:"2%"},children:e},`c-${t}`)),J.row.map((e,t)=>s.jsx("span",{className:"coord-label row",style:{top:`${4+t*92/(u.current.size-1)}%`,left:"2%"},children:e},`r-${t}`))]}),s.jsx("canvas",{ref:p,className:"goBoard",onMouseMove:ae,onMouseLeave:()=>{u.current.hoverPos={x:-1,y:-1},v()},onClick:ie})]})}),!b&&s.jsx("div",{className:"student-controls",style:{marginTop:"20px",display:"flex",justifyContent:"center"},children:s.jsx("button",{className:"control-pill-btn btn-undo",onClick:_,children:"‚Ü© Geri Al"})}),b&&s.jsxs("div",{className:"bottom-controls",style:{flexWrap:"wrap",justifyContent:"center"},children:[s.jsx("button",{className:"control-btn resetBtn",onClick:le,title:"Ba≈üa D√∂n",children:"‚Ü∫"}),s.jsxs("div",{className:"teacher-controls",style:{display:"flex",gap:"10px",alignItems:"center",marginLeft:"10px"},children:[s.jsx("div",{style:{width:"1px",height:"30px",background:"#555"}}),$==="SETUP"?s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{display:"flex",gap:"5px"},children:[9,13,19].map(e=>s.jsx("button",{onClick:()=>ne(e),style:{background:Y===e?"#3498db":"transparent",border:"1px solid #7f8c8d",color:Y===e?"white":"#bdc3c7",borderRadius:"4px",padding:"5px 10px",cursor:"pointer"},children:e},e))}),s.jsx("div",{style:{width:"1px",height:"30px",background:"#555"}}),s.jsx("button",{className:"control-btn",onClick:()=>se(),title:"Renk Deƒüi≈ütir",children:s.jsx("div",{className:`turn-indicator ${P==="black"?"white":"black"}`})}),s.jsx("button",{className:"control-btn",style:{borderRadius:"5px",width:"auto",padding:"0 10px",fontSize:"0.9rem"},onClick:()=>U("RECORD"),children:"üî¥ Kayƒ±t"})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"control-btn",style:{background:"#2ecc71"},onClick:()=>H("correct"),title:"Doƒüru",children:"‚úÖ"}),s.jsx("button",{className:"control-btn",style:{background:"#e74c3c"},onClick:()=>H("wrong"),title:"Yanlƒ±≈ü",children:"‚ùå"}),s.jsx("button",{className:"control-btn",style:{background:"#e67e22"},onClick:_,title:"Bir Adƒ±m Geri Al",children:"‚Ü©Ô∏è"}),s.jsx("div",{style:{width:"1px",height:"30px",background:"#555"}}),s.jsx("button",{className:"control-btn",style:{borderRadius:"5px",width:"auto",padding:"0 10px",fontSize:"0.9rem"},onClick:oe,children:"üíæ ƒ∞ndir"}),s.jsx("button",{className:"control-btn",style:{fontSize:"0.8rem"},onClick:()=>U("SETUP"),title:"Setup",children:"‚öôÔ∏è"})]})]})]})]})};export{he as G,s as j};
