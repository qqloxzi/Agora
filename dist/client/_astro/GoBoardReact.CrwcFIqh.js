import{r as k}from"./index.DYrVU9rO.js";var A={exports:{}},T={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X;function ue(){if(X)return T;X=1;var d=Symbol.for("react.transitional.element"),y=Symbol.for("react.fragment");function S(w,p,x){var C=null;if(x!==void 0&&(C=""+x),p.key!==void 0&&(C=""+p.key),"key"in p){x={};for(var u in p)u!=="key"&&(x[u]=p[u])}else x=p;return p=x.ref,{$$typeof:d,type:w,key:C,ref:p!==void 0?p:null,props:x}}return T.Fragment=y,T.jsx=S,T.jsxs=S,T}var K;function de(){return K||(K=1,A.exports=ue()),A.exports}var o=de();const he=({problem:d,isTeacher:y=!1,onSolve:S=null,description:w=""})=>{const p=k.useRef(null),x=k.useRef(null),C=k.useRef(!1),u=k.useRef({size:9,stones:[],labels:[],turn:"black",history:[],moveTree:{children:[]},currentNode:null,lastMove:null,isLocked:!1,hoverPos:{x:-1,y:-1},hasSolution:!1,mode:"SOLVE",initialStateStr:"",recordingStartColor:"black"}),[Z,M]=k.useState(""),[ee,L]=k.useState("#fff"),[te,N]=k.useState("black"),[J,re]=k.useState({col:[],row:[]}),[B,$]=k.useState("SETUP"),[D,Y]=k.useState(9),z=k.useRef(typeof Audio<"u"?new Audio("/sounds/stone.mp3"):null);k.useEffect(()=>(F(),window.addEventListener("resize",Q),()=>window.removeEventListener("resize",Q)),[d]);const F=()=>{const e=u.current;if(e.size=d?.size||9,Y(e.size),q(e.size),e.turn=d?.turn||"black",e.recordingStartColor=e.turn,e.lastMove=d?.lastMove||null,e.mode=y?"SETUP":"SOLVE",$(e.mode),d?.solution)if(Array.isArray(d.solution)&&d.solution.length>0){let t={children:[]};e.moveTree=t,d.solution.forEach(n=>{const r={...n,children:[],status:null};t.children.push(r),t=r}),t.status="correct",e.hasSolution=!0}else d.solution.children?(e.moveTree=d.solution,e.hasSolution=!0):(e.moveTree={children:[]},e.hasSolution=!1);else e.moveTree={children:[]},e.hasSolution=!1;if(e.currentNode=e.moveTree,d?.initialState)try{const t=typeof d.initialState=="string"?JSON.parse(d.initialState):d.initialState;Array.isArray(t)&&t.length>0&&(e.stones=t,e.initialStateStr=typeof d.initialState=="string"?d.initialState:JSON.stringify(t))}catch(t){console.error("Parse Error",t)}N(e.turn),M(y?"√ñƒüretmen Modu: SETUP":e.hasSolution?"":"Analiz Modu"),G(e.size),requestAnimationFrame(g)},q=e=>{const t=u.current;t.size=e,t.stones=Array(e).fill(0).map(()=>Array(e).fill(null)),t.labels=Array(e).fill(0).map(()=>Array(e).fill(null)),t.history=[],t.isLocked=!1,t.hoverPos={x:-1,y:-1}},G=e=>{const t=[],n=[];for(let r=0;r<e;r++)t.push(String.fromCharCode(65+(r>=8?r+1:r)));for(let r=0;r<e;r++)n.push(e-r);re({col:t,row:n})},ne=e=>{if(!y)return;const t=u.current;t.size=e,Y(e),q(e),t.moveTree={children:[]},t.currentNode=t.moveTree,t.initialStateStr="",t.history=[],t.lastMove=null,G(e),M(`${e}x${e} Tahta Hazƒ±r`),requestAnimationFrame(g)},I=e=>{const t=u.current;e==="SETUP"?(t.mode="SETUP",v("Ta≈ülarƒ± dizin.","#fff")):e==="RECORD"&&(t.initialStateStr=JSON.stringify(t.stones),t.recordingStartColor=t.turn,t.moveTree={children:[]},t.currentNode=t.moveTree,t.history=[],t.mode="RECORD",v("Kayƒ±t Ba≈üladƒ±","#f1c40f")),$(e)},U=()=>{const e=u.current;if(!e.hasSolution){if(e.history.length===0)return;const t=e.history.pop();e.stones=JSON.parse(t),e.turn=e.turn==="black"?"white":"black",N(e.turn),e.lastMove=null,v("Hamle geri alƒ±ndƒ±.","#f1c40f"),g();return}if(!(!e.currentNode||e.currentNode===e.moveTree)){if(e.history.length>0){const t=e.history.pop();e.stones=JSON.parse(t)}else e.initialStateStr&&(e.stones=JSON.parse(e.initialStateStr));e.currentNode.parent?e.currentNode=e.currentNode.parent:e.currentNode=e.moveTree,e.turn=e.turn==="black"?"white":"black",N(e.turn),e.currentNode&&e.currentNode!==e.moveTree?e.lastMove={x:e.currentNode.x,y:e.currentNode.y,color:e.currentNode.color}:e.lastMove=null,e.isLocked=!1,M(""),L("#fff"),g()}},_=e=>{const t=u.current;if(t.mode==="RECORD"){if(!t.currentNode||t.currentNode===t.moveTree){v("Hen√ºz hamle yok!","#e74c3c");return}t.currentNode.status=e,v(e==="correct"?"‚úÖ ƒ∞≈üaretlendi":"‚ùå ƒ∞≈üaretlendi",e==="correct"?"#2ecc71":"#e74c3c")}},oe=()=>{const e=u.current,t=h=>{const{parent:f,...b}=h;return b.children&&b.children.length>0&&(b.children=b.children.map(m=>t(m))),b},n=t(e.moveTree),r=prompt("Soru Ba≈ülƒ±ƒüƒ±:")||"Yeni Soru",s=prompt("Kategori:")||"Genel",c=prompt("A√ßƒ±klama:")||"",a={id:`prob-${Date.now()}`,size:e.size,labels:JSON.stringify(e.labels),turn:e.recordingStartColor,title:r,category:s,description:c,initialState:e.initialStateStr||JSON.stringify(e.stones),solution:n},l=JSON.stringify(a,null,2).replace(/"([a-zA-Z0-9_]+)":/g,"$1:");console.log("--- JS OBJE √áIKTISI ---"),console.log(l),navigator.clipboard.writeText(l).then(()=>alert("JS Objesi formatƒ±nda kopyalandƒ±!")).catch(()=>{console.error("Kopyalama ba≈üarƒ±sƒ±z, konsola yazƒ±ldƒ±."),console.log(l)})},se=()=>{const e=u.current;e.turn=e.turn==="black"?"white":"black",N(e.turn)},E=(e,t)=>e>=0&&e<u.current.size&&t>=0&&t<u.current.size,O=(e,t,n,r,s=new Set)=>{const c=`${e},${t}`;if(s.has(c))return 0;s.add(c);let a=0;return[[e+1,t],[e-1,t],[e,t+1],[e,t-1]].forEach(([i,l])=>{E(i,l)&&(r[i][l]?r[i][l].color===n&&(a+=O(i,l,n,r,s)):a++)}),a},H=(e,t,n,r)=>{const s=r[e][t];!s||s.color!==n||(r[e][t]=null,[[e+1,t],[e-1,t],[e,t+1],[e,t-1]].forEach(([c,a])=>{E(c,a)&&H(c,a,n,r)}))},P=(e,t,n)=>{const r=u.current,s=JSON.stringify(r.stones),c=JSON.parse(s);if(c[e][t])return!1;c[e][t]={color:n};let a=!1;const i=n==="black"?"white":"black";if([[e+1,t],[e-1,t],[e,t+1],[e,t-1]].forEach(([h,f])=>{E(h,f)&&c[h][f]&&c[h][f].color===i&&O(h,f,i,c)===0&&(H(h,f,i,c),a=!0)}),!a&&O(e,t,n,c)===0)return v("Yasak Hamle","#e74c3c"),!1;const l=JSON.stringify(c);return r.history.includes(l)?(v("Ko Kuralƒ±!","#e74c3c"),!1):(r.history.push(s),r.stones=c,r.lastMove={x:e,y:t,color:n},z.current&&(z.current.currentTime=0,z.current.play().catch(()=>{})),!0)},g=()=>{const e=p.current;if(!e)return;const t=e.getContext("2d"),n=u.current,r=n.size,s=Math.max(2,window.devicePixelRatio||1),c=e.getBoundingClientRect(),a=Math.floor(c.width);e.style.width=`${a}px`,e.style.height=`${a}px`,e.width=a*s,e.height=a*s,t.save(),t.setTransform(s,0,0,s,0,0),t.imageSmoothingEnabled=!0,t.imageSmoothingQuality&&(t.imageSmoothingQuality="high");const i=a*.05,l=(a-i*2)/(r-1);t.clearRect(0,0,a,a),t.fillStyle="#f4b35f",t.fillRect(0,0,a,a),t.strokeStyle="#2b1d0e",t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.beginPath();for(let m=0;m<r;m++){const j=i+m*l,R=Math.round(j)+.5;t.moveTo(R,i+.5),t.lineTo(R,a-i+.5),t.moveTo(i+.5,R),t.lineTo(a-i+.5,R)}t.stroke();const h=r===19?[3,9,15]:r===13?[3,6,9]:[2,4,6];if(t.fillStyle="#000",h.forEach(m=>h.forEach(j=>{t.beginPath(),t.arc(i+m*l,i+j*l,3,0,Math.PI*2),t.fill()})),n.stones.forEach((m,j)=>{m.forEach((R,ce)=>{R&&V(t,j,ce,R.color,l,i,1)})}),n.lastMove){const{x:m,y:j}=n.lastMove;t.beginPath(),t.arc(i+m*l,i+j*l,l*.15,0,Math.PI*2),t.fillStyle=n.stones[m][j].color==="black"?"#fff":"#000",t.fill()}const{x:f,y:b}=n.hoverPos;if(f>=0&&b>=0&&!n.stones[f][b]&&!n.isLocked){const m=n.turn;V(t,f,b,m,l,i,.45)}t.restore()},V=(e,t,n,r,s,c,a)=>{const i=c+t*s,l=c+n*s,h=s*.47;if(e.save(),e.globalAlpha=a,e.beginPath(),e.arc(i,l,h,0,Math.PI*2),r==="black"){const f=e.createRadialGradient(i-h*.3,l-h*.3,0,i,l,h);f.addColorStop(0,"#666"),f.addColorStop(.5,"#333"),f.addColorStop(1,"#000"),e.fillStyle=f}else{const f=e.createRadialGradient(i-h*.3,l-h*.3,0,i,l,h);f.addColorStop(0,"#fff"),f.addColorStop(.6,"#f5f5f5"),f.addColorStop(1,"#e0e0e0"),e.fillStyle=f}e.fill(),e.restore()},ie=e=>{const t=u.current;if(t.isLocked&&t.mode==="SOLVE"){p.current.style.cursor="default";return}const n=p.current.getBoundingClientRect(),r=36,s=(n.width-r*2)/(t.size-1),c=e.clientX-n.left-r,a=e.clientY-n.top-r,i=Math.round(c/s),l=Math.round(a/s);E(i,l)?(t.hoverPos.x!==i||t.hoverPos.y!==l)&&(t.hoverPos={x:i,y:l},p.current.style.cursor="pointer",requestAnimationFrame(g)):(t.hoverPos={x:-1,y:-1},p.current.style.cursor="default",requestAnimationFrame(g))},ae=()=>{const e=u.current;if(C.current)return;const{x:t,y:n}=e.hoverPos;if(!(!E(t,n)||e.isLocked)&&!e.stones[t][n]){if(e.mode==="SETUP"){e.stones[t][n]={color:e.turn},g();return}if(e.mode==="RECORD"){const r=e.turn;if(P(t,n,r)){const s={x:t,y:n,color:r,children:[],status:null,parent:e.currentNode},c=e.currentNode.children.find(a=>a.x===t&&a.y===n);c?(e.currentNode=c,v("Mevcut varyasyon","#3498db")):(e.currentNode.children.push(s),e.currentNode=s),e.turn=e.turn==="black"?"white":"black",N(e.turn),g()}return}if(e.mode==="SOLVE"){const r=e.currentNode.children?.find(s=>s.x===t&&s.y===n);r?P(t,n,r.color)&&(e.currentNode=r,e.turn=e.turn==="black"?"white":"black",N(e.turn),g(),r.children&&r.children.length>0?(C.current=!0,setTimeout(()=>{const s=r.children[0];P(s.x,s.y,s.color)&&(e.currentNode=s,e.turn=e.turn==="black"?"white":"black",N(e.turn),g(),W(s)),C.current=!1},200)):W(r)):e.hasSolution?(v("Yanlƒ±≈ü Hamle","#e74c3c"),e.isLocked=!0,S&&S(!1)):P(t,n,e.turn)&&(e.turn=e.turn==="black"?"white":"black",N(e.turn),g())}}},W=e=>{if(e.children&&e.children.length>0){e.status==="wrong"&&(v("Yanlƒ±≈ü Yol","#e74c3c"),S&&S(!1));return}e.status==="correct"?(v("Tebrikler! Serbest mod aktif.","#2ecc71"),u.current.isLocked=!1,u.current.hasSolution=!1,S&&S(!0)):e.status==="wrong"?(v("Yanlƒ±≈ü Yol","#e74c3c"),u.current.isLocked=!0,S&&S(!1)):(!e.children||e.children.length===0)&&(v("Tebrikler! √á√∂zd√ºn√ºz. Serbest analiz modu aktif.","#2ecc71"),u.current.isLocked=!1,u.current.hasSolution=!1,S&&S(!0))},v=(e,t)=>{M(e),L(t)},Q=()=>requestAnimationFrame(g),le=()=>F();return o.jsxs("div",{className:"go-app-react",ref:x,children:[(!y||B==="RECORD")&&o.jsx("div",{className:"top-info-bar",children:o.jsxs("div",{className:"turn-badge",children:[o.jsx("div",{className:`turn-indicator ${d?.turn||"black"}`}),o.jsx("span",{children:d?.turn==="white"?"Beyaz":"Siyah"}),d?.title&&o.jsxs(o.Fragment,{children:[o.jsx("span",{style:{margin:"0 8px",opacity:.4},children:"|"}),o.jsx("span",{style:{fontWeight:500,opacity:.9,color:"var(--tree-accent, #d97706)"},children:d.title})]})]})}),w&&!y&&o.jsx("div",{className:"go-hint-box",children:w}),o.jsx("div",{className:"status",style:{color:ee},children:Z}),o.jsx("div",{className:"go-wrapper-shadow",children:o.jsxs("div",{className:"go-container",children:[o.jsxs("div",{className:"coords-layer",children:[J.col.map((e,t)=>o.jsx("span",{className:"coord-label col",style:{left:`${4+t*92/(u.current.size-1)}%`,top:"2%"},children:e},`c-${t}`)),J.row.map((e,t)=>o.jsx("span",{className:"coord-label row",style:{top:`${4+t*92/(u.current.size-1)}%`,left:"2%"},children:e},`r-${t}`))]}),o.jsx("canvas",{ref:p,className:"goBoard",onMouseMove:ie,onMouseLeave:()=>{u.current.hoverPos={x:-1,y:-1},g()},onClick:ae})]})}),!y&&o.jsx("div",{className:"student-controls",style:{marginTop:"20px",display:"flex",justifyContent:"center"},children:o.jsx("button",{className:"control-pill-btn btn-undo",onClick:U,children:"‚Ü© Geri Al"})}),y&&o.jsxs("div",{className:"bottom-controls",style:{flexWrap:"wrap",justifyContent:"center"},children:[o.jsx("button",{className:"control-btn resetBtn",onClick:le,title:"Ba≈üa D√∂n",children:"‚Ü∫"}),o.jsxs("div",{className:"teacher-controls",style:{display:"flex",gap:"10px",alignItems:"center",marginLeft:"10px"},children:[o.jsx("div",{style:{width:"1px",height:"30px",background:"#555"}}),B==="SETUP"?o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{display:"flex",gap:"5px"},children:[9,13,19].map(e=>o.jsx("button",{onClick:()=>ne(e),style:{background:D===e?"#3498db":"transparent",border:"1px solid #7f8c8d",color:D===e?"white":"#bdc3c7",borderRadius:"4px",padding:"5px 10px",cursor:"pointer"},children:e},e))}),o.jsx("div",{style:{width:"1px",height:"30px",background:"#555"}}),o.jsx("button",{className:"control-btn",onClick:()=>se(),title:"Renk Deƒüi≈ütir",children:o.jsx("div",{className:`turn-indicator ${te==="black"?"white":"black"}`})}),o.jsx("button",{className:"control-btn",style:{borderRadius:"5px",width:"auto",padding:"0 10px",fontSize:"0.9rem"},onClick:()=>I("RECORD"),children:"üî¥ Kayƒ±t"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"control-btn",style:{background:"#2ecc71"},onClick:()=>_("correct"),title:"Doƒüru",children:"‚úÖ"}),o.jsx("button",{className:"control-btn",style:{background:"#e74c3c"},onClick:()=>_("wrong"),title:"Yanlƒ±≈ü",children:"‚ùå"}),o.jsx("button",{className:"control-btn",style:{background:"#e67e22"},onClick:U,title:"Bir Adƒ±m Geri Al",children:"‚Ü©Ô∏è"}),o.jsx("div",{style:{width:"1px",height:"30px",background:"#555"}}),o.jsx("button",{className:"control-btn",style:{borderRadius:"5px",width:"auto",padding:"0 10px",fontSize:"0.9rem"},onClick:oe,children:"üíæ ƒ∞ndir"}),o.jsx("button",{className:"control-btn",style:{fontSize:"0.8rem"},onClick:()=>I("SETUP"),title:"Setup",children:"‚öôÔ∏è"})]})]})]})]})};export{he as G,o as j};
