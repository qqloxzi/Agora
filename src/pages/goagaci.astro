---
// pages/goagaci.astro
import GoBoard from '../components/goboard.astro';
import { problemSet } from '../data/problems';
import Layout from "@layouts/Layout.astro";

// --- 3 KOLONLU AƒûA√á YAPILANDIRMASI ---
const treeColumns = [
  {
    title: "Ba≈ülangƒ±√ß (20-18k)",
    colorClass: "beginner",
    levels: [
      [{ id: 'Kurallar', parent: null }],          
      [{ id: 'Esir Alma', parent: 'Kurallar' }],   
      [{ id: 'Atari', parent: 'Esir Alma' }],      
      [{ id: 'G√∂zler', parent: 'Atari' }],         
      [{ id: 'Baƒülama', parent: 'G√∂zler' }],       
      [{ id: 'Oyun Sonu 1', parent: 'Baƒülama' }]   
    ]
  },
  {
    title: "Temel Ta≈ülar (17-12k)",
    colorClass: "intermediate",
    levels: [
      [{ id: '√ñl√ºm & Kalƒ±m', parent: null }],      
      [{ id: 'Tesuji', parent: '√ñl√ºm & Kalƒ±m' }],  
      [{ id: 'Sente', parent: 'Tesuji' }],         
      [{ id: '≈ûekil', parent: 'Sente' }],          
      [{ id: 'Ko Sava≈üƒ±', parent: '≈ûekil' }],      
      [{ id: 'A√ßƒ±lƒ±≈ü', parent: 'Ko Sava≈üƒ±' }]      
    ]
  },
  {
    title: "ƒ∞leri Seviye (11-6k)",
    colorClass: "advanced",
    levels: [
      [{ id: 'Joseki', parent: null }],            
      [{ id: 'ƒ∞stila', parent: 'Joseki' }],        
      [{ id: 'Saldƒ±rƒ±', parent: 'ƒ∞stila' }],       
      [{ id: 'Sayma', parent: 'Saldƒ±rƒ±' }],        
      [{ id: 'Yose', parent: 'Sayma' }],           
      [{ id: 'Dan Seviyesi', parent: 'Yose' }]     
    ]
  }
];

const getCategoryStyle = (cat) => {
  const styles = {
    'Kurallar': { icon: 'üìñ', color: '#3498db' },
    'Esir Alma': { icon: '‚öóÔ∏è', color: '#3498db' },
    'Atari': { icon: 'üéØ', color: '#3498db' },
    'G√∂zler': { icon: 'üëÄ', color: '#3498db' },
    'Baƒülama': { icon: 'üîó', color: '#3498db' },
    'Oyun Sonu 1': { icon: 'üèÅ', color: '#3498db' },
    '√ñl√ºm & Kalƒ±m': { icon: 'üíÄ', color: '#f1c40f' },
    'Tesuji': { icon: '‚ö°', color: '#f1c40f' },
    'Sente': { icon: 'üó°Ô∏è', color: '#f1c40f' },
    '≈ûekil': { icon: 'üî∫', color: '#f1c40f' },
    'Ko Sava≈üƒ±': { icon: 'üîÑ', color: '#f1c40f' },
    'A√ßƒ±lƒ±≈ü': { icon: 'üåü', color: '#f1c40f' },
    'Joseki': { icon: 'üìö', color: '#e74c3c' },
    'ƒ∞stila': { icon: 'üè∞', color: '#e74c3c' },
    'Saldƒ±rƒ±': { icon: '‚öîÔ∏è', color: '#e74c3c' },
    'Sayma': { icon: 'üßÆ', color: '#e74c3c' },
    'Yose': { icon: 'üçÇ', color: '#e74c3c' },
    'Dan Seviyesi': { icon: 'ü•ã', color: '#e74c3c' },
  };
  return styles[cat] || { icon: 'Go', color: '#95a5a6' };
};
---

<Layout title="Go Aƒüacƒ± - Yetenek Yolu">
  <div class="page-wrapper">
    
    <h1 class="main-title">Go Akademisi M√ºfredatƒ±</h1>
    <p class="subtitle">Sol men√ºden konularƒ± inceleyebilir, saƒü taraftaki aƒüa√ßtan ilerleyebilirsin.</p>

    <div id="level-map" class="content-grid">
      
      <aside class="sidebar">
        <div class="sidebar-header">
          <h3>Konu Listesi</h3>
        </div>
        <div class="sidebar-content">
          {treeColumns.map(col => (
            <div class="course-group">
              <h4 style={`border-left: 4px solid var(--${col.colorClass}-color, #fff)`}>{col.title}</h4>
              <ul>
                {col.levels.map(lvl => (
                  <li>
                    <span class="dot"></span>
                    {lvl[0].id}
                  </li>
                ))}
              </ul>
            </div>
          ))}
        </div>
      </aside>

      <main class="tree-wrapper">
        <div class="columns-container">
          {treeColumns.map((col, colIndex) => (
            <div class={`tree-column ${col.colorClass}`}>
              <div class="column-header">
                <h2>{col.title}</h2>
                <div class="header-line"></div>
              </div>

              <div class="tree-nodes-container">
                {col.levels.map((row, rowIndex) => (
                  <div class="tree-row">
                    {row.map((node) => {
                      const style = getCategoryStyle(node.id);
                      const count = problemSet.filter(p => p.category === node.id).length;
                      
                      return (
                        <div class="tree-node-wrapper">
                          {node.parent && <div class="connector-line"></div>}
                          <div 
                            class="level-card locked" 
                            id={`node-${node.id.replace(/\s+/g, '-')}-${colIndex}`} 
                            data-id={node.id} 
                            data-parent={node.parent}
                            onclick={`tryOpenLevel('${node.id}', '${node.parent}', this.id)`}
                          >
                            <div class="icon-ring">
                              <div class="level-icon" style={`background-color: ${style.color}`}>
                                {style.icon}
                              </div>
                              <div class="badge">{count}</div>
                              
                              <div class="lock-overlay">
                                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
                              </div>
                              <div class="check-overlay">
                                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#2ecc71" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
                              </div>
                            </div>
                            <h3>{node.id}</h3>
                          </div>
                        </div>
                      );
                    })}
                  </div>
                ))}
              </div>
            </div>
          ))}
        </div>
      </main>

    </div>

    <div id="game-view" style="display: none;">
      <div class="game-nav">
        <button class="back-btn" onclick="goToMap()">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg>
          M√ºfredata D√∂n
        </button>
        <div style="text-align: right;">
           <h2 id="current-set-title">SET ADI</h2>
           <div id="live-score" style="font-size: 0.9rem; color: #bdc3c7;">Puan: 0</div>
        </div>
      </div>

      <div id="problem-container">
        {problemSet.map((p, index) => (
          <div class="problem-card" data-index={index} data-category={p.category} style="display: none;">
            <div class="header">
              <h3>{p.title}</h3>
              <span class="count-badge">Soru {index + 1}</span>
            </div>
            
            <GoBoard problem={p} isTeacher={false} />
            
            <div class="hint-display" id={`hint-text-${index}`}></div>

            <div class="nav-controls">
              
              <button class="nav-btn icon-btn prev-btn" onclick="navigate(-1)" title="√ñnceki" style="visibility: hidden;">
                  <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
              </button>

              <button class="nav-btn icon-btn hint-btn" onclick={`showHint(${index})`} title="ƒ∞pucu">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><path d="M12 17h.01"/></svg>
              </button>

              <button class="nav-btn icon-btn next-btn" onclick="navigate(1)" disabled={true} title="Sonraki">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
              </button>

            </div>
          </div>
        ))}
      </div>
    </div>

    <div id="result-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div id="result-icon" class="result-icon">üèÜ</div>
            <h2 id="result-title">Set Tamamlandƒ±!</h2>
            <p id="result-message">Tebrikler, harika i≈ü √ßƒ±kardƒ±n.</p>
            <div class="score-display">
                <span id="final-score">0</span> / <span id="total-questions">10</span>
            </div>
            <div class="modal-buttons">
                <button onclick="goToMap()" class="modal-btn secondary">Aƒüaca D√∂n</button>
                <button onclick="retryLevel()" class="modal-btn primary">Tekrar Dene</button>
            </div>
        </div>
    </div>

  </div>
</Layout>

<script is:inline>
  // --- STATE ---
  let activeProblems = []; 
  let currentIndex = 0;
  let currentScore = 0;
  let currentProblemFailed = false;
  let currentCategory = "";
  
  let completedSets = JSON.parse(localStorage.getItem('completedSets')) || [];

  document.addEventListener('DOMContentLoaded', () => {
    updateTreeVisuals();
  });

  // --- AƒûA√á G√ñRSEL G√úNCELLEME ---
  function updateTreeVisuals() {
    const cards = document.querySelectorAll('.level-card');
    cards.forEach(card => {
        const id = card.getAttribute('data-id');
        const parent = card.getAttribute('data-parent');
        
        card.classList.remove('locked', 'unlocked', 'completed');
        
        if (completedSets.includes(id)) {
            card.classList.add('completed');
        } else if (parent === 'null' || parent === null || completedSets.includes(parent)) {
            card.classList.add('unlocked');
        } else {
            card.classList.add('locked');
        }
    });
  }

  window.tryOpenLevel = function(category, parent, elementId) {
      const isUnlocked = parent === 'null' || parent === null || completedSets.includes(parent);
      if (isUnlocked) {
          openLevel(category);
      } else {
          const card = document.getElementById(elementId);
          if(card) {
              card.classList.add('shake-lock');
              setTimeout(() => card.classList.remove('shake-lock'), 500);
          }
      }
  };

  // --- OYUN AKI≈ûI ---
  window.openLevel = function(category) {
    currentCategory = category;
    document.getElementById('level-map').style.display = 'none';
    document.getElementById('game-view').style.display = 'block';
    document.getElementById('current-set-title').innerText = category.toUpperCase();
    currentScore = 0;
    document.getElementById('live-score').innerText = `Puan: 0`;
    filterSet(category);
  };

  window.goToMap = function() {
    document.getElementById('result-modal').style.display = 'none';
    document.getElementById('game-view').style.display = 'none';
    document.getElementById('level-map').style.display = 'grid'; 
    updateTreeVisuals(); 
    window.scrollTo({ top: 0, behavior: 'smooth' });
  };

  window.retryLevel = function() {
      document.getElementById('result-modal').style.display = 'none';
      openLevel(currentCategory);
  };

  window.handleMoveResult = function(isCorrect) {
      if (!isCorrect) currentProblemFailed = true;
  };

  window.filterSet = function(category) {
    const allCards = Array.from(document.querySelectorAll('.problem-card'));
    activeProblems = allCards.filter(card => card.getAttribute('data-category') === category);

    if (activeProblems.length === 0) {
        alert(`"${category}" seti i√ßin soru bulunamadƒ±! L√ºtfen problems.ts dosyasƒ±nƒ± kontrol edin.`);
        goToMap(); return;
    }
    currentIndex = 0;
    currentProblemFailed = false;
    
    activeProblems.forEach((card, idx) => {
        const countBadge = card.querySelector('.count-badge');
        if(countBadge) countBadge.innerText = `Soru ${idx + 1} / ${activeProblems.length}`;
        const nextBtn = card.querySelector('.next-btn');
        if(nextBtn) {
            nextBtn.disabled = true; nextBtn.style.opacity = "0.5"; nextBtn.classList.remove('glow-animation'); 
            // ƒ∞konu geri y√ºkle (ok i≈üareti)
            nextBtn.innerHTML = idx === activeProblems.length - 1 
                ? `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>` 
                : `<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>`;
        }
    });
    updateView();
  };

  function updateView() {
    document.querySelectorAll('.problem-card').forEach(c => c.style.display = 'none');
    const currentCard = activeProblems[currentIndex];
    currentCard.style.display = 'block';
    document.querySelectorAll('.hint-display').forEach(h => { h.style.opacity = '0'; h.innerHTML = ''; });
  }

  window.navigate = function(direction) {
    const newIndex = currentIndex + direction;
    if (!currentProblemFailed && direction === 1) {
        currentScore++;
        document.getElementById('live-score').innerText = `Puan: ${currentScore}`;
    }
    if (currentIndex === activeProblems.length - 1 && direction === 1) {
        showResults(); return;
    }
    if (newIndex >= 0 && newIndex < activeProblems.length) {
      currentIndex = newIndex; currentProblemFailed = false; updateView();
    }
  };

  window.showResults = function() {
      const modal = document.getElementById('result-modal');
      const title = document.getElementById('result-title');
      const message = document.getElementById('result-message');
      const icon = document.getElementById('result-icon');
      const total = activeProblems.length;
      
      document.getElementById('final-score').innerText = currentScore;
      document.getElementById('total-questions').innerText = total;
      
      const successThreshold = Math.ceil(total * 0.8);

      if (currentScore >= successThreshold) {
          title.innerText = "Set Tamamlandƒ±!";
          title.style.color = "#2ecc71";
          message.innerText = "Tebrikler! Bir sonraki seviye a√ßƒ±ldƒ±.";
          icon.innerText = "üèÜ";
          if (!completedSets.includes(currentCategory)) {
              completedSets.push(currentCategory);
              localStorage.setItem('completedSets', JSON.stringify(completedSets));
          }
      } else {
          title.innerText = "Ba≈üarƒ±sƒ±z";
          title.style.color = "#e74c3c";
          message.innerText = `Ge√ßmek i√ßin en az ${successThreshold} doƒüru yapmalƒ±sƒ±n.`;
          icon.innerText = "‚ùå";
      }
      modal.style.display = 'flex';
  };

  window.showHint = function(index) {
    const currentCard = activeProblems[currentIndex];
    const hintDiv = currentCard.querySelector('.hint-display');
    if (hintDiv.style.opacity === "1") { hintDiv.style.opacity = "0"; setTimeout(() => { hintDiv.innerHTML = ""; }, 300); } 
    else { hintDiv.innerHTML = `<span class="hint-icon">üí°</span> <strong>ƒ∞pucu:</strong> Hamleni yapmadan √∂nce 2 adƒ±m sonrasƒ±nƒ± d√º≈ü√ºn.`; hintDiv.style.opacity = "1"; }
  };

  window.unlockNextButton = function() {
    const currentCard = activeProblems[currentIndex];
    if (currentCard) {
      const nextBtn = currentCard.querySelector('.next-btn');
      if (nextBtn) {
        nextBtn.disabled = false; nextBtn.style.opacity = "1"; nextBtn.style.cursor = "pointer"; 
        // Burada arkaplan rengini deƒüi≈ütirmek yerine, parlaklƒ±k efekti veriyoruz.
        // nextBtn.style.backgroundColor = "#2ecc71";  <-- BU SATIR KALDIRILDI (Solid renk olmasƒ±n diye)
        nextBtn.classList.add('glow-animation');
      }
    }
  };
</script>

<style>
  .page-wrapper {
    max-width: 1400px; margin: 0 auto; padding: 20px;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  }
  .main-title { font-size: 2.5rem; color: #ffffff; margin-bottom: 5px; text-shadow: 0 2px 4px rgba(0,0,0,0.5); text-align: center; }
  .subtitle { color: #bdc3c7; font-size: 1.1rem; margin-bottom: 40px; text-align: center; }

  /* GRID */
  .content-grid { display: grid; grid-template-columns: 280px 1fr; gap: 40px; align-items: start; }

  /* SIDEBAR */
  .sidebar { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 15px; padding: 20px; position: sticky; top: 20px; backdrop-filter: blur(10px); }
  .sidebar-header h3 { color: #fff; margin-top: 0; border-bottom: 1px solid rgba(255,255,255,0.2); padding-bottom: 10px; }
  .course-group { margin-bottom: 25px; }
  .course-group h4 { color: #ecf0f1; margin: 0 0 10px 0; padding-left: 10px; font-size: 1rem; opacity: 0.9; }
  .course-group ul { list-style: none; padding: 0; margin: 0; }
  .course-group li { color: #bdc3c7; padding: 5px 0 5px 15px; font-size: 0.9rem; display: flex; align-items: center; gap: 8px; }
  .dot { width: 6px; height: 6px; background: rgba(255,255,255,0.3); border-radius: 50%; }

  :root { --beginner-color: #3498db; --intermediate-color: #f1c40f; --advanced-color: #e74c3c; }

  .columns-container { display: flex; justify-content: space-between; gap: 30px; }
  .tree-column { flex: 1; background: transparent; padding: 10px; display: flex; flex-direction: column; align-items: center; }
  .column-header h2 { color: #fff; margin: 0 0 15px 0; font-size: 1.3rem; text-align: center; }
  .header-line { width: 60px; height: 4px; margin: 0 auto 50px auto; border-radius: 2px; }
  .tree-column.beginner .header-line { background: #3498db; }
  .tree-column.intermediate .header-line { background: #f1c40f; }
  .tree-column.advanced .header-line { background: #e74c3c; }

  .tree-nodes-container { display: flex; flex-direction: column; gap: 70px; width: 100%; }
  .tree-row { display: flex; justify-content: center; width: 100%; position: relative; }
  .tree-node-wrapper { position: relative; display: flex; flex-direction: column; align-items: center; }
  .connector-line { position: absolute; top: -75px; left: 50%; width: 3px; height: 75px; background-color: rgba(255,255,255,0.3); transform: translateX(-50%); z-index: 0; }

  .level-card { display: flex; flex-direction: column; align-items: center; cursor: pointer; transition: all 0.3s ease; z-index: 1; position: relative; }
  .icon-ring { width: 100px; height: 100px; border-radius: 50%; background-color: #ecf0f1; border: 5px solid #bdc3c7; display: flex; align-items: center; justify-content: center; position: relative; margin-bottom: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); transition: all 0.3s; }
  .level-icon { width: 75px; height: 75px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2.2rem; color: white; }
  .badge { position: absolute; top: 0; right: 0; background: #34495e; color: white; width: 25px; height: 25px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.75rem; font-weight: bold; border: 2px solid #fff; }
  .level-card h3 { color: #ffffff; margin: 0; font-size: 1rem; text-shadow: 0 1px 2px rgba(0,0,0,0.5); font-weight: 600; }

  .level-card.locked { opacity: 0.7; cursor: not-allowed; }
  .level-card.locked .icon-ring { border-color: #7f8c8d; background-color: #95a5a6; }
  .level-card.locked .level-icon { background-color: #7f8c8d !important; filter: grayscale(100%); }
  .level-card.locked .lock-overlay { display: flex; }
  .level-card.locked .check-overlay { display: none; }
  
  .level-card.unlocked .icon-ring { border-color: #f1c40f; }
  .level-card.unlocked .lock-overlay { display: none; }
  .level-card.unlocked .check-overlay { display: none; }
  .level-card.unlocked:hover { transform: scale(1.1); }
  
  .level-card.completed .icon-ring { border-color: #2ecc71; box-shadow: 0 0 15px rgba(46, 204, 113, 0.4); }
  .level-card.completed .lock-overlay { display: none; }
  .level-card.completed .check-overlay { display: flex; }

  .lock-overlay, .check-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 50%; display: none; align-items: center; justify-content: center; background: rgba(0,0,0,0.4); }
  .check-overlay { background: rgba(0,0,0,0); }
  .shake-lock { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
  @keyframes shake { 10%, 90% { transform: translate3d(-1px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 40%, 60% { transform: translate3d(4px, 0, 0); } }

  /* --- OYUN ALANI --- */
  .game-nav { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid rgba(255,255,255,0.2); color: white; }
  .game-nav h2 { margin: 0; font-size: 1.2rem; color: white; text-shadow: 0 1px 3px rgba(0,0,0,0.5); }
  .back-btn { background: rgba(255,255,255,0.15); border: 1px solid rgba(255,255,255,0.4); color: #fff; padding: 8px 15px; border-radius: 20px; display: flex; align-items: center; gap: 8px; font-weight: bold; cursor: pointer; transition: all 0.2s; }
  .back-btn:hover { background: rgba(255,255,255,0.3); transform: translateX(-3px); }
  
  .problem-card { background: transparent; border: none; box-shadow: none; padding: 10px 0; margin-bottom: 20px; text-align: center; }
  .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
  .header h3 { margin: 0; font-size: 1.5rem; color: #fff; text-shadow: 0 2px 4px rgba(0,0,0,0.5); }
  .count-badge { background: rgba(255,255,255,0.2); color: #fff; padding: 5px 12px; border-radius: 20px; font-size: 0.8rem; backdrop-filter: blur(4px); border: 1px solid rgba(255,255,255,0.1); }
  .hint-display { margin-top: 15px; background-color: #fff3cd; padding: 10px; border-radius: 8px; opacity: 0; transition: opacity 0.3s; color: #333; }
  
  /* --- G√úNCELLENEN BUTON STƒ∞LLERƒ∞ (≈ûEFFAF VE YUVARLAK) --- */
  .nav-controls { display: flex; justify-content: center; gap: 20px; margin-top: 20px; }
  
  .nav-btn.icon-btn { 
    width: 50px; height: 50px; border-radius: 50%;
    /* BU KISIM √ñNEMLƒ∞: ≈ûeffaf arka plan, beyazƒ±msƒ± border */
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: white; 
    display: flex; align-items: center; justify-content: center;
    cursor: pointer; transition: all 0.2s ease;
    backdrop-filter: blur(4px);
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  }
  
  /* Hover Efekti */
  .nav-btn.icon-btn:hover { 
    background: rgba(255, 255, 255, 0.25); 
    transform: scale(1.1); 
    border-color: rgba(255, 255, 255, 0.5);
  }
  
  /* Disabled Durumu */
  .nav-btn.icon-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; box-shadow: none; }
  
  /* Butonlara √∂zel ikon renkleri (Arka plan deƒüil, sadece ikon) */
  .prev-btn { color: #bdc3c7; }
  .hint-btn { color: #f1c40f; border-color: rgba(241, 196, 15, 0.4); }
  .next-btn { color: #3498db; border-color: rgba(52, 152, 219, 0.4); }

  .glow-animation { animation: pulse-green 2s infinite; }
  @keyframes pulse-green { 0% { box-shadow: 0 0 0 0 rgba(46, 204, 113, 0.7); } 70% { box-shadow: 0 0 0 15px rgba(46, 204, 113, 0); } 100% { box-shadow: 0 0 0 0 rgba(46, 204, 113, 0); } }
  
  .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; display: flex; justify-content: center; align-items: center; backdrop-filter: blur(5px); }
  .modal-content { background: white; padding: 40px; border-radius: 20px; text-align: center; max-width: 400px; width: 90%; box-shadow: 0 20px 50px rgba(0,0,0,0.5); animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
  @keyframes popIn { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }
  .result-icon { font-size: 4rem; margin-bottom: 10px; }
  .score-display { font-size: 2.5rem; font-weight: bold; color: #2c3e50; margin: 20px 0; }
  .modal-buttons { display: flex; gap: 10px; justify-content: center; margin-top: 20px; }
  .modal-btn { padding: 10px 20px; border-radius: 8px; border: none; cursor: pointer; font-weight: bold; font-size: 1rem; }
  .modal-btn.primary { background: #3498db; color: white; }
  .modal-btn.secondary { background: #ecf0f1; color: #7f8c8d; }
  .modal-btn:hover { transform: translateY(-2px); }

  @media (max-width: 900px) {
    .content-grid { grid-template-columns: 1fr; }
    .sidebar { position: relative; top: 0; margin-bottom: 40px; }
    .columns-container { flex-direction: column; }
  }
</style>