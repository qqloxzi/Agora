---
import Container from "@components/container.astro";
import Features from "@components/features.astro";
import Hero from "@components/hero.astro";
import Logos from "@components/logos.astro";
import Layout from "@layouts/Layout.astro";

import { getCollection } from "astro:content";
import { Picture } from "astro:assets";

const publishedBlogEntries = await getCollection("blog", ({ data }) => {
  return !data.draft && data.publishDate < new Date();
});
publishedBlogEntries.sort(function (a, b) {
  return b.data.publishDate.valueOf() - a.data.publishDate.valueOf();
});
const latestPosts = publishedBlogEntries.slice(0, 3);

---

<Layout title="Go Akademisi- Online Go Eğitim Platformu">
  
  <Container>
    <Hero />
    <Container>
  <div class="mt-24 mb-10 flex justify-between items-end">
    <h2 class="text-3xl font-bold text-gray-800 dark:text-white">
      Kütüphaneden Son Yazılar
    </h2>
    <a href="/blog" class="text-indigo-600 hover:text-indigo-500 font-medium">
      Tümünü Gör &rarr;
    </a>
  </div>

  <div class="grid md:grid-cols-3 gap-8">
    {
      latestPosts.map((blogPostEntry) => (
        <div class="group">
          <a href={`/blog/${blogPostEntry.slug}`}>
            <div class="overflow-hidden rounded-lg mb-4">
              <Picture
                src={blogPostEntry.data.image.src}
                alt={blogPostEntry.data.image.alt}
                sizes="(max-width: 800px) 100vw, 400px"
                width={800}
                height={600}
                loading="lazy"
                class="w-full h-56 object-cover object-center transition duration-300 group-hover:scale-110 bg-gray-100"
              />
            </div>
            
            <div>
              <span class="text-indigo-600 uppercase tracking-wider text-xs font-bold">
                {blogPostEntry.data.category}
              </span>

              <h3 class="text-xl font-semibold leading-snug tracking-tight mt-2 text-gray-800 dark:text-white group-hover:text-indigo-600 transition-colors">
                {blogPostEntry.data.title}
              </h3>

              <div class="flex items-center gap-2 mt-3 text-sm text-gray-500">
                <span>{blogPostEntry.data.author}</span>
                <span>•</span>
                <time datetime={blogPostEntry.data.publishDate.toISOString()}>
                  
                  {blogPostEntry.data.publishDate.toLocaleDateString("tr-TR", {
                    year: "numeric",
                    month: "long",
                    day: "numeric",
                  })}
                </time>
              </div>
            </div>
          </a>
        </div>
      ))
    }
  </div>


  
</Container>
    <Features />
    <Logos />
  </Container>
</Layout>
